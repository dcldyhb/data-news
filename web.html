<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>数据镜头下的新职业生存实录</title>

    <!-- 引入必要的库 -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucUutcjServCrA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#3B82F6",
              secondary: "#F97316",
              accent: "#10B981",
              "cert-red": "#EF4444",
              "uncert-gray": "#6B7280",
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      :root {
        --reveal-duration: 0.8s;
      }
      html {
        scroll-behavior: smooth;
      }
      body {
        background-color: #111827;
        color: #d1d5db;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
          "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
        overflow-x: hidden;
      }
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity var(--reveal-duration) ease-out,
          transform var(--reveal-duration) ease-out;
      }
      .reveal.visible {
        opacity: 1;
        transform: translateY(0);
      }
      .glow-card {
        position: relative;
        overflow: hidden;
        background-color: rgba(31, 41, 55, 0.5);
        border-radius: 1rem;
      }
      .glow-card::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        border-radius: 1rem;
        border: 1px solid transparent;
        z-index: -10;
        background: linear-gradient(
            120deg,
            rgba(255, 255, 255, 0.15),
            rgba(255, 255, 255, 0.05)
          )
          border-box;
        -webkit-mask: linear-gradient(#fff 0 0) padding-box,
          linear-gradient(#fff 0 0);
        -webkit-mask-composite: destination-out;
        mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        pointer-events: none;
      }
      .danmaku {
        transition: all 0.2s ease-in-out;
        cursor: pointer;
        background-color: rgba(31, 41, 55, 0.7);
        color: white;
        padding: 8px 16px;
        border-radius: 9999px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
        backdrop-filter: blur(10px);
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        font-size: 14px;
      }
      .danmaku:hover {
        transform: scale(1.1);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
        background-color: #3b82f6;
        z-index: 50 !important;
      }
      .danmaku .likes {
        color: #fcd34d;
        font-size: 12px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }
      .scroll-text {
        animation: scroll 25s linear infinite;
        position: absolute;
        will-change: transform;
        left: 100vw; /* 确保弹幕在动画开始前位于屏幕右侧外 */
      }
      .scroll-text:hover {
        animation-play-state: paused;
      }
      @keyframes scroll {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(calc(-100vw - 100%));
        }
      }
      .echarts-tooltip {
        background-color: rgba(31, 41, 55, 0.9) !important;
        border-color: #4b5563 !important;
        color: #d1d5db !important;
      }
      .echarts-tooltip-name {
        color: #9ca3af !important;
      }
      .echarts-tooltip-value {
        font-weight: bold !important;
      }

      /* 文本对齐和首行缩进样式 */
      p {
        text-align: justify !important;
        text-indent: 2em;
        line-height: 1.6;
      }

      /* 针对包含段落文本的div应用两端对齐和首行缩进 */
      div.text-center.max-w-3xl,
      div.text-center.max-w-4xl {
        text-align: justify !important;
        text-indent: 2em;
        line-height: 1.6;
      }

      /* 标题、特殊元素和交互元素保持居中 */
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      .danmaku,
      input,
      button,
      .subtitle,
      footer p,
      div.mt-8.text-center {
        text-align: center !important;
        text-indent: 0 !important;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-gray-300">
    <header
      class="min-h-screen flex flex-col items-center justify-center text-center p-8 relative overflow-hidden"
    >
      <div
        class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-gray-900 to-gray-900 z-0"
      ></div>
      <div
        class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-500/20 rounded-full filter blur-3xl animate-pulse"
      ></div>
      <div
        class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-orange-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"
      ></div>

      <div class="relative z-20 w-full max-w-7xl">
        <h1
          class="text-4xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-tight"
        >
          数据镜头下的<br class="md:hidden" /><span
            class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500"
            >新职业生存实录</span
          >
        </h1>
        <div class="max-w-4xl mx-auto text-lg text-gray-400 space-y-4 mb-8">
          <p>
            自4月19日起，每周六和重大节假日“魅力重庆”无人机灯光秀在重庆两江四岸核心区常态化展演，背后是无人机飞行工程师陆子祥团队操作。随着低空经济的蓬勃发展，无人机飞行工程师作为新兴职业逐渐进入大家视野。
          </p>
          <p>
            自2019年建立新职业信息发布制度以来，人社部已累计发布了7批共110个新兴职业，主要分布在人工智能与数字经济、康养服务、低碳环保与工业技术等领域。新兴职业逐渐兴起，产业结构、地域结构、职业性质、人才结构维度均发生变化，就业结构进入了“动态重组期”。权威数据将作为追光灯，深入分析新兴职业的发展现状、背后动因及面临的问题，展现这场职业变革的壮阔图景。
          </p>
        </div>
        <div id="header-chart" class="w-full h-80 glow-card p-4"></div>
      </div>
    </header>

    <main id="main-content"></main>

    <footer class="text-center py-10 bg-gray-900 border-t border-gray-800">
      <p class="text-gray-500">&copy; 2025 新职业观察报告.</p>
    </footer>

    <template id="section-template">
      <section class="py-20 px-4 reveal">
        <div class="max-w-7xl mx-auto">
          <h2
            class="text-3xl md:text-5xl font-bold text-center text-white mb-4"
          ></h2>
          <div class="subtitle text-center text-gray-500 mb-16"></div>
          <div class="content-wrapper"></div>
        </div>
      </section>
    </template>

    <template id="intro-template">
      <section
        class="min-h-[70vh] flex items-center justify-center text-center p-8 relative overflow-hidden reveal"
      >
        <div
          class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-gray-900 to-gray-900 z-0"
        ></div>
        <div
          class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-500/20 rounded-full filter blur-3xl animate-pulse"
        ></div>
        <div
          class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-orange-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"
        ></div>
        <div
          id="danmaku-container"
          class="absolute inset-0 z-10"
          aria-hidden="true"
        ></div>
        <div class="relative z-20">
          <h2
            class="text-4xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-tight"
          ></h2>
        </div>
      </section>
    </template>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // =================================================================
        // 配置与数据定义
        // =================================================================
        const contentTemplates = {
          status: `<div class="space-y-16"><div class="text-center max-w-3xl mx-auto">新职业认证经历严格的官方审批流程，从预研到最终发布需要经过多个环节的严格把关。</div><div class="lifecycle-chart w-full h-96 glow-card p-4"></div><div class="text-center max-w-3xl mx-auto">目前110个官方认证职业远不足以涵盖市面上的全部新兴职业，多种民间命名岗位尚未拥有"官方姓名"。以"元宇宙场景策划师"（含葬礼策划方向）为例，近3年岗位量年增350%，但至今仍未被纳入官方职业体系，这类"未认证职业"多停留在前两个阶段。</div><div class="professions-word-cloud w-full h-96 glow-card p-4"></div><div class="text-center max-w-3xl mx-auto">与此同时，新兴职业在不同地域、不同领域也呈现出不同发展态势。</div><div class="domain-barchart w-full h-96 glow-card p-4"></div></div>`,
          drivers: `<div class="sankey-chart w-full h-[32rem] glow-card p-4"></div>`,
          rectification: `<div class="text-center max-w-3xl mx-auto">职业名称的"正名"过程，藏着行业成熟的密码。2022年"银发经济"相关岗位中，38%的招聘信息使用"老年数字辅导员""银发生活规划师"等民间称呼，直到2024 年 "老年数字服务师"被纳入新职业目录，才形成统一的职业标准。</div><div class="rectification-word-clouds w-full h-96 mt-12"></div>`,
          predicament: `<div class="text-center max-w-3xl mx-auto">繁荣背后，新兴职业的权益保障仍存短板。数据显示，未认证职业从业者中，68%未签订规范劳动合同，45%无法享受带薪休假。</div><div class="rights-barchart w-full h-96 mt-12 glow-card p-4"></div>`,
          reconstruction: `<div class="text-center max-w-3xl mx-auto space-y-4"><p>宋龙杰从一线收派件到获评"济南市技术能手"，再到成为首批E类高层次人才，他的逆袭成为数万从业者的缩影。</p><p>当代年轻人渴望摆脱传统职场的束缚、追求更加灵活的工作方式的态度。他们希望能够在自己的节奏下工作，充分发挥创造力，同时享受生活的平衡。</p></div><div class="factors-piechart w-full h-96 mt-12"></div>`,
          conclusion: `<div class="text-center max-w-4xl mx-auto space-y-4"><p>从电影《她》走出的人工智能数字人训练师，从《聊斋志异》走出的服务犬驯养师……新兴职业的生长史，本质上是个体价值与时代需求的"动态应答"。</p><p>从技术驱动到政策规范，从权益保障到价值重构，每一组数据的波动，都在书写着就业市场的新规则——而那些尚未被命名的职业，或许正藏着未来社会的模样。</p></div><div class="future-map w-full h-96 mt-12 glow-card p-4 relative"></div><div class="mt-8 text-center"><p class="text-lg mb-4">你认为下一个被认证的职业会是？</p><input type="text" placeholder="输入你的想法..." class="bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary"><button class="bg-primary text-white font-bold py-2 px-6 rounded-lg ml-2 transition-transform hover:scale-105">提交</button></div>`,
        };
        const sections = [
          {
            id: "status-intro",
            title: "01. 行业现状",
            isIntro: true,
            setup: setupStatusIntro,
          },
          { id: "status", title: "", setup: setupStatusCharts },
          {
            id: "drivers",
            title: "02. 驱动密码",
            subtitle:
              "新兴职业的爆发并非偶然，而是技术突破、市场需求与政策引导共同作用的结果。",
            setup: setupSankeyChart,
          },
          {
            id: "rectification",
            title: '03. "正名"时间',
            setup: setupRectificationCharts,
          },
          { id: "predicament", title: "04. 行业困境", setup: setupRightsChart },
          {
            id: "reconstruction",
            title: "05. 价值重构",
            setup: setupReconstructionChart,
          },
          { id: "conclusion", title: "结尾", setup: setupConclusionChart },
        ];
        const echartsTooltipOption = {
          backgroundColor: "rgba(31, 41, 55, 0.9)",
          borderColor: "#4B5563",
          textStyle: { color: "#D1D5DB" },
          className: "echarts-tooltip",
        };

        // =================================================================
        // 页面初始化
        // =================================================================
        function initPage() {
          // 初始化标题页图表
          initHeaderChart();

          const mainContent = document.getElementById("main-content");
          const sectionTemplate = document.getElementById("section-template");
          const introTemplate = document.getElementById("intro-template");
          if (!mainContent || !sectionTemplate || !introTemplate) {
            console.error("Essential elements not found!");
            return;
          }

          sections.forEach((data) => {
            let sectionClone;
            if (data.isIntro) {
              // 使用intro模板创建小标题页面
              sectionClone = introTemplate.content.cloneNode(true);
              const sectionEl = sectionClone.querySelector("section");
              sectionEl.id = data.id;
              sectionClone.querySelector("h2").innerHTML = data.title;
            } else {
              // 使用普通模板创建内容页面
              sectionClone = sectionTemplate.content.cloneNode(true);
              const sectionEl = sectionClone.querySelector("section");
              sectionEl.id = data.id;
              sectionClone.querySelector("h2").innerHTML = data.title;
              const subtitleEl = sectionClone.querySelector(".subtitle");
              if (data.subtitle) {
                subtitleEl.innerHTML = data.subtitle;
              } else {
                subtitleEl.remove();
              }
              if (contentTemplates[data.id]) {
                sectionClone.querySelector(".content-wrapper").innerHTML =
                  contentTemplates[data.id];
              }
            }

            mainContent.appendChild(sectionClone);
            if (data.setup) {
              try {
                const sectionEl = mainContent.querySelector(`#${data.id}`);
                data.setup(sectionEl);
              } catch (e) {
                console.error(`Error setting up section "${data.id}":`, e);
              }
            }
          });

          setupScrollAnimations();
        }

        function setupScrollAnimations() {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  entry.target.classList.add("visible");
                  observer.unobserve(entry.target);
                }
              });
            },
            { rootMargin: "0px 0px -10% 0px" }
          );

          document
            .querySelectorAll(".reveal")
            .forEach((el) => observer.observe(el));
        }

        function setupDanmaku() {
          const container = document.getElementById("danmaku-container");
          if (!container) return;
          const danmakuItems = [
            {
              text: '说的太好了，未来的职场，只有"金手艺"，没有"铁饭碗"！！！',
              likes: "170",
            },
            {
              text: "数据分析师，学费基本2万以上，刚出来工资基本税前8000左右",
              likes: "2872",
            },
            { text: "新职业+新工种+老员工+老技术=办新证", likes: "2182" },
            { text: "取消劳务派遣", likes: "5231" },
            {
              text: "养老服务师绝对吃香，现在的中国己经进入人口老龄化了",
              likes: "273",
            },
            { text: "这些行业该怎么入行呢", likes: "8769" },
            { text: "新兴职业的出现也给了年轻人更多的选择机会", likes: "1086" },
            {
              text: "传统行业被男的占据太久了，新兴行业女性可以直接参与",
              likes: "4549",
            },
          ];
          danmakuItems.forEach((item, i) => {
            const wrapper = document.createElement("div");
            wrapper.className = "scroll-text";
            // 改进弹幕垂直分布，确保更均匀覆盖屏幕
            wrapper.style.top = `${5 + (i % 8) * 11}%`;
            // 调整动画持续时间和延迟，让弹幕更连续，速度更快
            wrapper.style.animationDuration = `${8 + Math.random() * 7}s`;
            wrapper.style.animationDelay = `${i * 2 + Math.random() * 3}s`;
            const el = document.createElement("div");
            el.className = "danmaku";
            el.innerHTML = `
              <span>${item.text}</span>
              <span class="likes" style="margin-left: 8px; display: inline-flex; align-items: center; gap: 4px;">
                <span style="font-size: 12px;">👍</span>
                <span>${item.likes}</span>
              </span>
            `;

            // 添加鼠标悬停暂停功能
            el.addEventListener("mouseenter", () => {
              wrapper.style.animationPlayState = "paused";
            });

            el.addEventListener("mouseleave", () => {
              wrapper.style.animationPlayState = "running";
            });

            wrapper.appendChild(el);
            container.appendChild(wrapper);
          });
        }

        // =================================================================
        // 标题页图表初始化
        // =================================================================
        function initHeaderChart() {
          setTimeout(() => {
            const chartElement = document.getElementById("header-chart");
            if (!chartElement) {
              console.error("Header chart element not found");
              return;
            }
            const headerChart = echarts.init(chartElement, "dark");

            // 数据准备
            const years = [
              "2019年",
              "2020年",
              "2021年",
              "2022年",
              "2024年",
              "2025年",
            ];
            const jobCounts = [13, 16, 18, 18, 19, 17];
            const growthRates = [0, 23.08, 12.5, 0, 5.56, -10.53];

            headerChart.setOption({
              title: {
                text: "新兴职业发布趋势",
                left: "center",
                textStyle: {
                  color: "#fff",
                  fontSize: 20,
                  fontWeight: "bold",
                },
              },
              tooltip: {
                trigger: "axis",
                axisPointer: {
                  type: "cross",
                  crossStyle: {
                    color: "#999",
                  },
                },
                backgroundColor: "rgba(0,0,0,0.8)",
                borderColor: "#4B5563",
                borderWidth: 1,
                textStyle: {
                  color: "#fff",
                },
              },
              legend: {
                data: ["新增职业数量", "增长速度"],
                top: "12%",
                textStyle: {
                  color: "#fff",
                  fontSize: 12,
                },
              },
              xAxis: [
                {
                  type: "category",
                  data: years,
                  axisPointer: {
                    type: "shadow",
                  },
                  axisLabel: {
                    color: "#9CA3AF",
                    fontSize: 11,
                  },
                },
              ],
              yAxis: [
                {
                  type: "value",
                  name: "职业数量",
                  min: 0,
                  max: 25,
                  interval: 5,
                  axisLabel: {
                    formatter: "{value} 个",
                    color: "#9CA3AF",
                  },
                  nameTextStyle: {
                    color: "#9CA3AF",
                  },
                },
                {
                  type: "value",
                  name: "增长速度",
                  min: -20,
                  max: 30,
                  interval: 10,
                  axisLabel: {
                    formatter: "{value}%",
                    color: "#9CA3AF",
                  },
                  nameTextStyle: {
                    color: "#9CA3AF",
                  },
                },
              ],
              series: [
                {
                  name: "新增职业数量",
                  type: "bar",
                  data: jobCounts,
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#3B82F6" },
                      { offset: 1, color: "#1E40AF" },
                    ]),
                  },
                  label: {
                    show: true,
                    position: "top",
                    color: "#fff",
                    fontSize: 11,
                  },
                },
                {
                  name: "增长速度",
                  type: "line",
                  yAxisIndex: 1,
                  data: growthRates,
                  itemStyle: {
                    color: "#F97316",
                  },
                  lineStyle: {
                    color: "#F97316",
                    width: 3,
                  },
                  symbol: "circle",
                  symbolSize: 8,
                  label: {
                    show: true,
                    position: "top",
                    formatter: "{c}%",
                    color: "#F97316",
                    fontSize: 10,
                  },
                },
              ],
              grid: {
                left: "10%",
                right: "10%",
                bottom: "15%",
                top: "30%",
              },
            });

            // 窗口大小改变时重新调整图表
            window.addEventListener("resize", () => {
              headerChart.resize();
            });
          }, 500);
        }

        // =================================================================
        // 各章节图表实现
        // =================================================================
        function setupStatusIntro(section) {
          // 为这个特定的intro页面设置弹幕
          const container = section.querySelector("#danmaku-container");
          if (!container) return;
          const danmakuItems = [
            {
              text: '说的太好了，未来的职场，只有"金手艺"，没有"铁饭碗"！！！',
              likes: "170",
            },
            {
              text: "数据分析师，学费基本2万以上，刚出来工资基本税前8000左右",
              likes: "2872",
            },
            { text: "新职业+新工种+老员工+老技术=办新证", likes: "2182" },
            { text: "取消劳务派遣", likes: "5231" },
            {
              text: "养老服务师绝对吃香，现在的中国己经进入人口老龄化了",
              likes: "273",
            },
            { text: "这些行业该怎么入行呢", likes: "8769" },
            { text: "新兴职业的出现也给了年轻人更多的选择机会", likes: "1086" },
            {
              text: "传统行业被男的占据太久了，新兴行业女性可以直接参与",
              likes: "4549",
            },
          ];
          danmakuItems.forEach((item, i) => {
            const wrapper = document.createElement("div");
            wrapper.className = "scroll-text";
            // 改进弹幕垂直分布，确保更均匀覆盖屏幕
            wrapper.style.top = `${5 + (i % 8) * 11}%`;
            // 调整动画持续时间和延迟，让弹幕更连续，速度更快
            wrapper.style.animationDuration = `${8 + Math.random() * 7}s`;
            wrapper.style.animationDelay = `${i * 2 + Math.random() * 3}s`;
            const el = document.createElement("div");
            el.className = "danmaku";
            el.innerHTML = `
              <span>${item.text}</span>
              <span class="likes" style="margin-left: 8px; display: inline-flex; align-items: center; gap: 4px;">
                <span style="font-size: 12px;">👍</span>
                <span>${item.likes}</span>
              </span>
            `;

            // 添加鼠标悬停暂停功能
            el.addEventListener("mouseenter", () => {
              wrapper.style.animationPlayState = "paused";
            });

            el.addEventListener("mouseleave", () => {
              wrapper.style.animationPlayState = "running";
            });

            wrapper.appendChild(el);
            container.appendChild(wrapper);
          });
        }

        function setupStatusCharts(section) {
          // 添加延迟确保DOM完全渲染
          setTimeout(() => {
            const lifecycleElement = section.querySelector(".lifecycle-chart");
            if (!lifecycleElement) {
              console.error("Lifecycle chart element not found");
              return;
            }
            const lifecycleChart = echarts.init(lifecycleElement, "dark");
            lifecycleChart.setOption({
              tooltip: { ...echartsTooltipOption },
              series: [
                {
                  type: "graph",
                  layout: "none",
                  symbolSize: [100, 60],
                  roam: false,
                  label: {
                    show: true,
                    color: "#fff",
                    fontSize: 11,
                    fontWeight: "bold",
                    formatter: function (params) {
                      return params.name;
                    },
                  },
                  tooltip: {
                    show: true,
                    backgroundColor: "rgba(0,0,0,0.8)",
                    borderColor: "#4B5563",
                    borderWidth: 1,
                    textStyle: {
                      color: "#fff",
                      fontSize: 12,
                    },
                    formatter: function (params) {
                      const descriptions = {
                        预研阶段:
                          "<b>预研阶段</b><br/>📋 前期研究准备<br/>• 技术可行性分析<br/>• 市场需求调研<br/>• 风险评估报告",
                        正式申报:
                          "<b>正式申报</b><br/>📝 提交申报材料<br/>• 完整申报文件<br/>• 标准申报表格<br/>• 相关证明材料",
                        形式审查:
                          "<b>形式审查</b><br/>🔍 材料完整性检查<br/>• 检查材料完整性<br/>• 验证格式规范性<br/>• 确认申报资质",
                        限期补正:
                          "<b>限期补正</b><br/>⚠️ 材料补充完善<br/>• 补正材料不足<br/>• 按要求完善文件<br/>• 重新提交审查",
                        专家评审:
                          "<b>专家评审</b><br/>👥 行业专家评议<br/>• 组织行业专家评议<br/>• 技术方案论证<br/>• 出具评审意见",
                        技术评审:
                          "<b>技术评审</b><br/>🔬 技术深度评估<br/>• 技术指标验证<br/>• 安全性评估<br/>• 标准符合性检查",
                        终止流程:
                          "<b>终止流程</b><br/>🛑 审批流程结束<br/>• 技术风险过高<br/>• 不符合国家政策<br/>• 存在安全隐患",
                        公示征求意见:
                          "<b>公示征求意见</b><br/>📢 社会公众监督<br/>• 公开征求意见<br/>• 收集社会反馈<br/>• 处理意见建议",
                        部际联席会议:
                          "<b>部际联席会议</b><br/>🏛️ 跨部门协调<br/>• 相关部委联合审议<br/>• 政策协调统一<br/>• 形成审议意见",
                        国务院审批:
                          "<b>国务院审批</b><br/>🏆 最高级别审批<br/>• 最高级别审批<br/>• 政策合规性确认<br/>• 正式批准文件",
                        发布实施:
                          "<b>发布实施</b><br/>✅ 正式生效执行<br/>• 正式对外发布<br/>• 制定实施细则<br/>• 开始执行监管",
                      };
                      return descriptions[params.name] || params.name;
                    },
                  },
                  edgeSymbol: ["none", "arrow"],
                  edgeSymbolSize: [0, 8],
                  data: [
                    {
                      name: "预研阶段",
                      x: 10,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "正式申报",
                      x: 30,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "形式审查",
                      x: 50,
                      y: 50,
                      symbol: "diamond",
                      itemStyle: {
                        color: "#F59E0B",
                        borderColor: "#D97706",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 45],
                    },
                    {
                      name: "专家评审",
                      x: 70,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "限期补正",
                      x: 50,
                      y: 20,
                      symbol: "rect",
                      itemStyle: {
                        color: "#EF4444",
                        borderColor: "#DC2626",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "技术评审",
                      x: 90,
                      y: 50,
                      symbol: "diamond",
                      itemStyle: {
                        color: "#F59E0B",
                        borderColor: "#D97706",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 45],
                    },
                    {
                      name: "公示征求意见",
                      x: 110,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [70, 35],
                    },
                    {
                      name: "终止流程",
                      x: 90,
                      y: 80,
                      symbol: "rect",
                      itemStyle: {
                        color: "#EF4444",
                        borderColor: "#DC2626",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "部际联席会议",
                      x: 130,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [75, 35],
                    },
                    {
                      name: "国务院审批",
                      x: 150,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#10B981",
                        borderColor: "#059669",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "发布实施",
                      x: 170,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#10B981",
                        borderColor: "#059669",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                  ],
                  links: [
                    {
                      source: "预研阶段",
                      target: "正式申报",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "正式申报",
                      target: "形式审查",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "形式审查",
                      target: "专家评审",
                      label: {
                        show: true,
                        formatter: "通过",
                        color: "#059669",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "形式审查",
                      target: "限期补正",
                      label: {
                        show: true,
                        formatter: "不通过",
                        color: "#DC2626",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#EF4444", width: 2, type: "dashed" },
                    },
                    {
                      source: "限期补正",
                      target: "形式审查",
                      lineStyle: { color: "#F59E0B", width: 1, curveness: 0.3 },
                    },
                    {
                      source: "专家评审",
                      target: "技术评审",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "技术评审",
                      target: "公示征求意见",
                      label: {
                        show: true,
                        formatter: "通过",
                        color: "#059669",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "技术评审",
                      target: "终止流程",
                      label: {
                        show: true,
                        formatter: "不通过",
                        color: "#DC2626",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#EF4444", width: 2, type: "dashed" },
                    },
                    {
                      source: "公示征求意见",
                      target: "部际联席会议",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "部际联席会议",
                      target: "国务院审批",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "国务院审批",
                      target: "发布实施",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                  ],
                  lineStyle: {
                    opacity: 0.8,
                    width: 2,
                    curveness: 0.1,
                    color: "#4B5563",
                  },
                },
              ],
            });

            const wordCloudElement = section.querySelector(
              ".professions-word-cloud"
            );
            if (!wordCloudElement) {
              console.error("Word cloud element not found");
              return;
            }
            const wordCloudChart = echarts.init(wordCloudElement, "dark");
            wordCloudChart.setOption({
              tooltip: {
                ...echartsTooltipOption,
                formatter: (p) => `${p.name}: ${p.value}个岗位`,
              },
              series: [
                {
                  type: "wordCloud",
                  shape: "circle",
                  sizeRange: [15, 60],
                  rotationRange: [-30, 30],
                  textStyle: {
                    fontFamily: "sans-serif",
                    color: (params) =>
                      params.data.certified ? "#EF4444" : "#6B7280",
                  },
                  emphasis: {
                    textStyle: { fontWeight: "bold", color: "#fff" },
                  },
                  data: [
                    { name: "民宿管家", value: 1500, certified: true },
                    { name: "无人机驾驶员", value: 1200, certified: true },
                    { name: "老年数字服务师", value: 900, certified: true },
                    { name: "AI训练师", value: 1800, certified: true },
                    { name: "元宇宙场景策划师", value: 2500, certified: false },
                    { name: "宠物殡葬师", value: 800, certified: false },
                    { name: "数据标注员", value: 2200, certified: false },
                    { name: "游戏陪练师", value: 1600, certified: false },
                  ],
                },
              ],
            });

            const domainBarElement = section.querySelector(".domain-barchart");
            if (!domainBarElement) {
              console.error("Domain bar chart element not found");
              return;
            }
            const domainBarChart = echarts.init(domainBarElement, "dark");
            domainBarChart.setOption({
              tooltip: { ...echartsTooltipOption },
              grid: {
                left: "3%",
                right: "4%",
                bottom: "3%",
                containLabel: true,
              },
              xAxis: { type: "value" },
              yAxis: {
                type: "category",
                data: [
                  "信息技术",
                  "生活服务",
                  "文化娱乐",
                  "医疗健康",
                  "教育培训",
                ],
              },
              series: [
                {
                  name: "岗位数量",
                  type: "bar",
                  data: [18000, 15000, 12000, 9000, 7500],
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [
                      { offset: 0, color: "#3B82F6" },
                      { offset: 1, color: "#22D3EE" },
                    ]),
                  },
                  label: { show: true, position: "right", color: "#fff" },
                },
              ],
            });
          }, 100);
        }

        function setupSankeyChart(section) {
          setTimeout(() => {
            const sankeyElement = section.querySelector(".sankey-chart");
            if (!sankeyElement) {
              console.error("Sankey chart element not found");
              return;
            }
            const sankeyChart = echarts.init(sankeyElement, "dark");
            sankeyChart.setOption({
              tooltip: {
                trigger: "item",
                triggerOn: "mousemove",
                ...echartsTooltipOption,
              },
              series: {
                type: "sankey",
                emphasis: { focus: "adjacency" },
                nodeAlign: "left",
                data: [
                  { name: "技术突破", itemStyle: { color: "#3B82F6" } },
                  { name: "市场需求", itemStyle: { color: "#F97316" } },
                  { name: "政策引导", itemStyle: { color: "#10B981" } },
                  { name: "AI训练师" },
                  { name: "无人机驾驶员" },
                  { name: "民宿管家" },
                  { name: "老年数字服务师" },
                  { name: "剧本杀DM" },
                ],
                links: [
                  { source: "技术突破", target: "AI训练师", value: 10 },
                  { source: "技术突破", target: "无人机驾驶员", value: 8 },
                  { source: "市场需求", target: "民宿管家", value: 9 },
                  { source: "市场需求", target: "剧本杀DM", value: 7 },
                  { source: "政策引导", target: "老年数字服务师", value: 6 },
                  { source: "市场需求", target: "老年数字服务师", value: 4 },
                  { source: "技术突破", target: "民宿管家", value: 2 },
                ],
                lineStyle: { color: "source", curveness: 0.5 },
              },
            });
          }, 200);
        }

        function setupRectificationCharts(section) {
          setTimeout(() => {
            const rectificationElement = section.querySelector(
              ".rectification-word-clouds"
            );
            if (!rectificationElement) {
              console.error("Rectification chart element not found");
              return;
            }
            const rectificationChart = echarts.init(
              rectificationElement,
              "dark"
            );
            rectificationChart.setOption({
              grid: [
                { left: "5%", top: "5%", bottom: "5%", width: "40%" },
                { right: "5%", top: "5%", bottom: "5%", width: "40%" },
              ],
              xAxis: [
                { gridIndex: 0, show: false },
                { gridIndex: 1, show: false },
              ],
              yAxis: [
                { gridIndex: 0, show: false },
                { gridIndex: 1, show: false },
              ],
              graphic: [
                {
                  type: "text",
                  left: "25%",
                  top: "10%",
                  style: {
                    text: "2022年 (民间)",
                    fill: "#9CA3AF",
                    font: "bold 16px sans-serif",
                  },
                },
                {
                  type: "text",
                  right: "20%",
                  top: "10%",
                  style: {
                    text: "2024年 (官方)",
                    fill: "#9CA3AF",
                    font: "bold 16px sans-serif",
                  },
                },
                {
                  type: "text",
                  right: "18%",
                  bottom: "10%",
                  style: {
                    text: "规范化率提升 ↗",
                    fill: "#10B981",
                    font: "bold 18px sans-serif",
                  },
                },
              ],
              series: [
                {
                  type: "wordCloud",
                  xAxisIndex: 0,
                  yAxisIndex: 0,
                  sizeRange: [12, 35],
                  rotationRange: [-45, 45],
                  textStyle: { fontFamily: "KaiTi", color: "#6B7280" },
                  data: [
                    { name: "银发生活规划师", value: 10 },
                    { name: "老年陪伴师", value: 8 },
                    { name: "老年数字辅导员", value: 12 },
                    { name: "助老员", value: 6 },
                  ],
                },
                {
                  type: "wordCloud",
                  xAxisIndex: 1,
                  yAxisIndex: 1,
                  sizeRange: [20, 50],
                  rotationRange: [0, 0],
                  textStyle: {
                    fontFamily: "Microsoft YaHei",
                    color: "#EF4444",
                  },
                  data: [{ name: "老年数字服务师", value: 20 }],
                },
              ],
            });
          }, 300);
        }

        function setupRightsChart(section) {
          setTimeout(() => {
            const rightsElement = section.querySelector(".rights-barchart");
            if (!rightsElement) {
              console.error("Rights chart element not found");
              return;
            }
            const rightsChart = echarts.init(rightsElement, "dark");
            rightsChart.setOption({
              tooltip: {
                trigger: "axis",
                axisPointer: { type: "shadow" },
                ...echartsTooltipOption,
              },
              legend: {
                data: ["认证职业", "未认证职业"],
                textStyle: { color: "#fff" },
              },
              grid: {
                left: "3%",
                right: "4%",
                bottom: "3%",
                containLabel: true,
              },
              xAxis: {
                type: "category",
                data: ["工伤保险覆盖率", "职业培训覆盖率", "职称评定覆盖率"],
              },
              yAxis: { type: "value", axisLabel: { formatter: "{value} %" } },
              series: [
                {
                  name: "认证职业",
                  type: "bar",
                  itemStyle: { color: "#3B82F6" },
                  data: [85, 78, 65],
                },
                {
                  name: "未认证职业",
                  type: "bar",
                  itemStyle: { color: "#6B7280" },
                  data: [32, 25, 5],
                },
              ],
            });
          }, 400);
        }

        function setupReconstructionChart(section) {
          setTimeout(() => {
            const pieElement = section.querySelector(".factors-piechart");
            if (!pieElement) {
              console.error("Pie chart element not found");
              return;
            }
            const pieChart = echarts.init(pieElement, "dark");
            const stages = {
              2020: [
                { value: 65, name: "薪资待遇" },
                { value: 25, name: "情感认同" },
                { value: 10, name: "工作自由" },
              ],
              2025: [
                { value: 40, name: "薪资待遇" },
                { value: 30, name: "情感认同" },
                { value: 30, name: "工作自由" },
              ],
            };
            pieChart.setOption({
              title: {
                text: "职业选择核心因素演变",
                left: "center",
                textStyle: { color: "#fff" },
              },
              tooltip: {
                trigger: "item",
                formatter: "{a} <br/>{b}: {c}%",
                ...echartsTooltipOption,
              },
              legend: {
                orient: "vertical",
                left: 10,
                data: ["薪资待遇", "情感认同", "工作自由"],
                textStyle: { color: "#fff" },
              },
              series: [
                {
                  name: "2025年",
                  type: "pie",
                  radius: ["40%", "70%"],
                  avoidLabelOverlap: false,
                  label: { show: false, position: "center" },
                  emphasis: {
                    label: { show: true, fontSize: 20, fontWeight: "bold" },
                  },
                  labelLine: { show: false },
                  data: stages["2025"],
                },
              ],
            });
            pieElement.addEventListener("click", () => {
              const currentYear = pieChart
                .getOption()
                .series[0].name.includes("2025")
                ? "2020"
                : "2025";
              pieChart.setOption({
                series: [
                  { name: `${currentYear}年`, data: stages[currentYear] },
                ],
              });
            });
          }, 500);
        }

        function setupConclusionChart(section) {
          setTimeout(() => {
            const mapElement = section.querySelector(".future-map");
            if (!mapElement) {
              console.error("Map chart element not found");
              return;
            }
            const mapChart = echarts.init(mapElement, "dark");
            const professions = [
              { name: "AI训练师", value: 1, category: 0 },
              { name: "无人机驾驶员", value: 1, category: 0 },
              { name: "元宇宙策划师", value: 1, category: 1 },
              { name: "游戏陪练师", value: 1, category: 1 },
              { name: "汉服造型师", value: 1, category: 1 },
              { name: "整理收纳师", value: 1, category: 1 },
            ];
            mapChart.setOption({
              title: {
                text: "中国新职业图谱",
                left: "center",
                textStyle: { color: "#fff" },
              },
              tooltip: {},
              legend: [
                {
                  data: ["已认证", "未认证"],
                  top: "bottom",
                  textStyle: { color: "#fff" },
                },
              ],
              animationDurationUpdate: 1500,
              animationEasingUpdate: "quinticInOut",
              series: [
                {
                  type: "graph",
                  layout: "force",
                  force: { repulsion: 80 },
                  data: professions,
                  categories: [
                    { name: "已认证", itemStyle: { color: "#EF4444" } },
                    { name: "未认证", itemStyle: { color: "#6B7280" } },
                  ],
                  roam: true,
                  label: { show: true, formatter: "{b}" },
                  lineStyle: { color: "source", curveness: 0.3 },
                },
              ],
            });
          }, 600);
        }

        // --- 启动页面 ---
        initPage();

        // 添加窗口尺寸变化时的响应式处理
        window.addEventListener("resize", () => {
          // 收集所有已初始化的图表实例并重新渲染
          const charts = document.querySelectorAll("[_echarts_instance_]");
          charts.forEach((element) => {
            const chart = echarts.getInstanceByDom(element);
            if (chart) {
              chart.resize();
            }
          });
        });
      });
    </script>
  </body>
</html>
