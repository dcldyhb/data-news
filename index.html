<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ•°æ®é•œå¤´ä¸‹çš„æ–°èŒä¸šç”Ÿå­˜å®å½•</title>

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.5.0/dist/echarts.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2.1.0/dist/echarts-wordcloud.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
      // è‡ªå®šä¹‰throttleå‡½æ•°
      function throttle(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
    </script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
      integrity="sha512-SfTiTlX6kk+qitfevl/7LibUOeJWlt9rbyDn92a1DqWOw9vWG2MFoays0sgObmWazO5BQPiFucUutcjServCrA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#3B82F6",
              secondary: "#F97316",
              accent: "#10B981",
              "cert-red": "#EF4444",
              "uncert-gray": "#6B7280",
            },
            animation: {
              "fade-in": "fadeIn 0.6s ease-out",
              "slide-up": "slideUp 0.8s ease-out",
              "zoom-in": "zoomIn 0.3s ease-out",
              "pulse-glow": "pulseGlow 2s ease-in-out infinite",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0" },
                "100%": { opacity: "1" },
              },
              slideUp: {
                "0%": { opacity: "0", transform: "translateY(30px)" },
                "100%": { opacity: "1", transform: "translateY(0)" },
              },
              zoomIn: {
                "0%": { opacity: "0", transform: "scale(0.9)" },
                "100%": { opacity: "1", transform: "scale(1)" },
              },
              pulseGlow: {
                "0%, 100%": { opacity: "0.4", transform: "scale(1)" },
                "50%": { opacity: "0.8", transform: "scale(1.05)" },
              },
            },
          },
        },
      };
    </script>

    <style type="text/tailwindcss">
      :root {
        --reveal-duration: 0.8s;
        --chart-bg: rgba(31, 41, 55, 0.8);
        --glass-bg: rgba(255, 255, 255, 0.05);
        --glass-border: rgba(255, 255, 255, 0.1);
      }
      /* Performance hints */
      .reveal,
      .glow-card,
      .scroll-text,
      .danmaku,
      .chart-container,
      .clickable-image,
      .image-modal,
      .chart-modal {
        will-change: transform, opacity;
        backface-visibility: hidden;
      }

      @media (prefers-reduced-motion: reduce) {
        * {
          animation-duration: 0.001s !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.001s !important;
          scroll-behavior: auto !important;
        }
        .scroll-text {
          animation: none !important;
        }
      }
      html {
        scroll-behavior: smooth;
      }

      /* å…¨å±sectionæ ·å¼ */
      section,
      header {
        scroll-margin-top: 0;
      }
      body {
        background: linear-gradient(
          135deg,
          #111827 0%,
          #1f2937 50%,
          #111827 100%
        );
        color: #d1d5db;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
          "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
        overflow-x: hidden;
        overflow-y: auto;
        position: relative;
      }

      /* æ€§èƒ½ä¼˜åŒ–çš„åŠ¨ç”»æ•ˆæœ */
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity var(--reveal-duration) cubic-bezier(0.4, 0, 0.2, 1),
          transform var(--reveal-duration) cubic-bezier(0.4, 0, 0.2, 1);
        will-change: opacity, transform;
      }
      .reveal.visible {
        opacity: 1;
        transform: translateY(0);
      }

      /* ä¼˜åŒ–çš„ç»ç’ƒå½¢æ€æ•ˆæœ */
      .glow-card {
        position: relative;
        overflow: hidden;
        background: linear-gradient(145deg, var(--chart-bg), rgba(17,24,39,0.9));
        border-radius: 1rem;
        border: 1px solid var(--glass-border);
        /* reduce backdrop-filter for performance */
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.25);
        transition: transform 0.25s ease, box-shadow 0.25s ease;
      }

      .glow-card:hover {
        transform: translateY(-4px) translateZ(0);
        box-shadow: 0 14px 30px rgba(0, 0, 0, 0.35);
      }
      /* ä¼˜åŒ–å¼¹å¹•æ ·å¼ */
      .danmaku {
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
        background: rgba(31, 41, 55, 0.85);
        color: white;
        padding: 8px 16px;
        border-radius: 9999px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25),
          0 1px 2px rgba(255, 255, 255, 0.1) inset;
        font-size: 14px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        will-change: transform, box-shadow;
      }
      .danmaku:hover {
        transform: scale(1.05) translateY(-2px);
        box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3),
          0 2px 8px rgba(0, 0, 0, 0.4);
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        border-color: rgba(59, 130, 246, 0.5);
        z-index: 50 !important;
      }

      /* ä¼˜åŒ–æ»šåŠ¨æ–‡æœ¬æ€§èƒ½ */
      .scroll-text {
        animation: scroll 20s linear infinite;
        position: absolute;
        will-change: transform;
        left: 100vw;
        contain: layout style paint;
      }
      .scroll-text:hover {
        animation-play-state: paused;
      }

      @keyframes scroll {
        from {
          transform: translate3d(0, 0, 0);
        }
        to {
          transform: translate3d(calc(-100vw - 100%), 0, 0);
        }
      }
      /* ç‚¹èµæ ·å¼ä¼˜åŒ– */
      .danmaku .likes {
        color: #fcd34d;
        font-size: 12px;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 4px;
        opacity: 0.9;
      }

      /* ECharts å·¥å…·æç¤ºæ ·å¼ä¼˜åŒ– */
      .echarts-tooltip {
        background: rgba(17, 24, 39, 0.95) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        color: #d1d5db !important;
        border-radius: 8px !important;
        backdrop-filter: blur(10px) !important;
        -webkit-backdrop-filter: blur(10px) !important;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5) !important;
      }
      .echarts-tooltip-name {
        color: #9ca3af !important;
      }
      .echarts-tooltip-value {
        font-weight: bold !important;
      }

      /* æ–‡æœ¬æ ·å¼ä¼˜åŒ– - ä¸¤ç«¯å¯¹é½å’Œé¦–è¡Œç¼©è¿› */
      p {
        text-align: justify !important;
        text-indent: 2em;
        line-height: 1.8;
        margin-bottom: 1.2em;
        color: rgba(209, 213, 219, 0.9);
      }

      /* æ®µè½æ–‡æœ¬ç»Ÿä¸€æ ·å¼ */
      .text-content,
      .fullscreen-text,
      div.text-center.max-w-3xl,
      div.text-center.max-w-4xl,
      div.text-center.max-w-5xl,
      .section-content p,
      .leading-relaxed {
        text-align: justify !important;
        text-indent: 2em !important;
        line-height: 1.8;
        color: rgba(209, 213, 219, 0.9);
      }

      /* ç‰¹å®šä¸éœ€è¦ç¼©è¿›çš„å…ƒç´  */
      h1,
      h2,
      h3,
      h4,
      h5,
      h6,
      .danmaku,
      input,
      button,
      .subtitle,
      footer p,
      .image-caption,
      nav p,
      .text-sm,
      .text-xs,
      .nav-item,
      .modal-close,
      .chart-title,
      .debug-info {
        text-align: center !important;
        text-indent: 0 !important;
      }

      /* ç¡®ä¿å¯¼èˆªèœå•æ–‡æœ¬ä¸å—å½±å“ */
      nav,
      nav *,
      .nav-indicator,
      .nav-progress {
        text-align: left !important;
        text-indent: 0 !important;
      }

      /* å¼ºåˆ¶æ­£æ–‡å†…å®¹åº”ç”¨ä¸¤ç«¯å¯¹é½å’Œé¦–è¡Œç¼©è¿› */
      .lg\:col-span-3 p,
      .max-w-md p,
      .max-w-lg p,
      .max-w-xl p,
      .max-w-2xl p,
      .max-w-3xl p,
      .max-w-4xl p,
      .max-w-5xl p,
      .max-w-6xl p,
      .text-2xl.text-gray-300 p {
        text-align: justify !important;
        text-indent: 2em !important;
        line-height: 1.8 !important;
      }

      /* å†…å®¹åŒºåŸŸæ ·å¼ä¼˜åŒ– */
      .section-content {
        max-width: 100%;
        margin: 0 auto;
      }

      .chart-container {
        background: linear-gradient(145deg, var(--chart-bg), rgba(17,24,39,0.9));
        /* reduce heavy blur */
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        border: 1px solid var(--glass-border);
        position: relative;
        overflow: hidden;
        max-height: 60vh;
      }

      .chart-container::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.1) 0%,
          transparent 50%,
          rgba(255, 255, 255, 0.05) 100%
        );
        pointer-events: none;
      }

      .text-content {
        background: linear-gradient(
          145deg,
          var(--glass-bg),
          rgba(31, 41, 55, 0.2)
        );
        border: 1px solid var(--glass-border);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        padding: 2.5rem;
        border-radius: 1rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        font-size: 1.125rem;
        line-height: 1.8;
        max-width: 80%;
        margin-left: auto;
        margin-right: auto;
      }

      .text-content::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          120deg,
          rgba(255, 255, 255, 0.05) 0%,
          transparent 50%,
          rgba(255, 255, 255, 0.02) 100%
        );
        pointer-events: none;
      }

      .text-content:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      /* å…¨å±sectionæ ·å¼ */
      .content-wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 2rem;
        height: auto;
        min-height: 40vh;
      }

      /* é€‚é…å…¨å±å›¾è¡¨ */
      .chart-container.fullscreen-chart {
        width: 90%;
        max-width: 1200px;
        height: 50vh;
        min-height: 400px;
      }

      /* å…¨å±æ–‡æœ¬å†…å®¹ */
      .text-content.fullscreen-text {
        max-width: 70%;
        font-size: 1.25rem;
        line-height: 2;
        text-align: center;
      }

      .lg\\:col-span-3.text-xl.text-gray-300 {
        padding: 0 2rem;
      }

      .lg\\:col-span-3.text-xl.text-gray-300 p {
        max-width: 18rem;
        margin: 0 auto;
        line-height: 1.8;
      }

      @media (max-width: 768px) {
        .grid.lg\\:grid-cols-5 {
          grid-template-columns: 1fr !important;
          gap: 2rem !important;
        }

        .lg\\:col-span-3,
        .lg\\:col-span-2 {
          grid-column: span 1 !important;
        }

        /* ç§»åŠ¨ç«¯å…¨å±ä¼˜åŒ– */
        .fullscreen-chart {
          width: 95% !important;
          height: 40vh !important;
        }

        .fullscreen-text {
          max-width: 95% !important;
          font-size: 1rem !important;
          padding: 1.5rem !important;
        }

        h2 {
          font-size: 2.5rem !important;
        }

        .subtitle {
          font-size: 1.125rem !important;
        }
      }

      /* å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡†ä¼˜åŒ– */
      .image-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .image-modal.show {
        display: flex !important;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .modal-content {
        max-width: 90vw;
        max-height: 90vh;
        border-radius: 1rem;
        box-shadow: 0 18px 36px rgba(0, 0, 0, 0.75);
        animation: zoomIn 0.22s cubic-bezier(0.2, 0, 0.2, 1);
        object-fit: contain;
      }

      .modal-close {
        position: absolute;
        top: 20px;
        right: 30px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 36px;
        font-weight: bold;
        cursor: pointer;
        z-index: 10000;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .modal-close:hover {
        color: #3b82f6;
        background: rgba(59, 130, 246, 0.1);
        transform: scale(1.1);
      }

      .clickable-image {
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 0.75rem;
        overflow: hidden;
      }

      .clickable-image:hover {
        transform: scale(1.02) translateY(-2px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes zoomIn {
        from {
          transform: scale(0.7);
          opacity: 0;
        }
        to {
          transform: scale(1);
          opacity: 1;
        }
      }

      /* å›¾è¡¨æ”¾å¤§æ¨¡æ€æ¡† */
      .chart-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .chart-modal.show {
        display: flex !important;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .chart-modal-content {
        width: 95vw;
        height: 90vh;
        background: rgba(17, 24, 39, 0.95);
        border-radius: 1rem;
        box-shadow: 0 18px 36px rgba(0, 0, 0, 0.75);
        animation: zoomIn 0.22s cubic-bezier(0.2, 0, 0.2, 1);
        position: relative;
        padding: 20px;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .chart-modal-close {
        position: absolute;
        top: 10px;
        right: 15px;
        color: rgba(255, 255, 255, 0.8);
        font-size: 36px;
        font-weight: bold;
        cursor: pointer;
        z-index: 10001;
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      .chart-modal-close:hover {
        color: #3b82f6;
        background: rgba(59, 130, 246, 0.1);
        transform: scale(1.1);
      }

      .chart-container {
        cursor: pointer;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
        position: relative;
      }

      .chart-container:hover {
        transform: scale(1.02) translateZ(0);
        box-shadow: 0 16px 32px rgba(59, 130, 246, 0.14);
      }

      .chart-container::after {
        content: "ğŸ”";
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.65);
        color: white;
        padding: 8px 12px;
        border-radius: 50%;
        font-size: 14px;
        opacity: 0;
        transition: opacity 0.25s ease;
        z-index: 10;
        backdrop-filter: blur(6px);
        -webkit-backdrop-filter: blur(6px);
      }

      .chart-container:hover::after {
        opacity: 1;
      }

      /* å¯¼èˆªæ ·å¼å¢å¼º */
      .nav-section {
        position: relative;
        overflow: hidden;
      }

      .nav-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.1),
          transparent
        );
        transition: left 0.5s;
      }

      .nav-section:hover::before {
        left: 100%;
      }

      .nav-active {
        background: rgba(59, 130, 246, 0.2) !important;
        border-left: 3px solid #3b82f6;
        color: #60a5fa !important;
      }

      .nav-indicator {
        position: fixed;
        top: 50%;
        right: 2px;
        transform: translateY(-50%);
        width: 2px;
        height: 200px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 1px;
        z-index: 40;
      }

      .nav-progress {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        background: linear-gradient(180deg, #3b82f6, #8b5cf6, #ec4899);
        border-radius: 1px;
        transition: height 0.3s ease;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-gray-300">
    <!-- å®Œæ•´å¯¼èˆªèœå• -->
    <nav
      class="fixed top-4 right-4 z-50 bg-black/80 backdrop-blur-md rounded-xl p-4 text-sm max-w-xs shadow-2xl border border-gray-700/50"
    >
      <div
        class="text-cyan-400 font-bold mb-3 text-center border-b border-gray-700 pb-2"
      >
        ğŸ“‘ ç›®å½•å¯¼èˆª
      </div>
      <div class="space-y-1">
        <a
          href="#header"
          class="nav-section block text-blue-400 hover:text-blue-300 transition-all hover:bg-blue-500/10 px-3 py-2 rounded-lg"
          data-section="header"
        >
          <span class="text-gray-400">ğŸ“</span> æ ‡é¢˜é¡µ
        </a>
        <a
          href="#status-intro"
          class="nav-section block text-emerald-400 hover:text-emerald-300 transition-all hover:bg-emerald-500/10 px-3 py-2 rounded-lg"
          data-section="status-intro"
        >
          <span class="text-gray-400">01</span> è¡Œä¸šç°çŠ¶
        </a>
        <a
          href="#drivers"
          class="nav-section block text-purple-400 hover:text-purple-300 transition-all hover:bg-purple-500/10 px-3 py-2 rounded-lg"
          data-section="drivers"
        >
          <span class="text-gray-400">02</span> é©±åŠ¨å¯†ç 
        </a>
        <a
          href="#rectification"
          class="nav-section block text-yellow-400 hover:text-yellow-300 transition-all hover:bg-yellow-500/10 px-3 py-2 rounded-lg"
          data-section="rectification"
        >
          <span class="text-gray-400">03</span> "æ­£å"æ—¶é—´
        </a>
        <a
          href="#predicament"
          class="nav-section block text-red-400 hover:text-red-300 transition-all hover:bg-red-500/10 px-3 py-2 rounded-lg"
          data-section="predicament"
        >
          <span class="text-gray-400">04</span> è¡Œä¸šå›°å¢ƒ
        </a>
        <a
          href="#reconstruction"
          class="nav-section block text-indigo-400 hover:text-indigo-300 transition-all hover:bg-indigo-500/10 px-3 py-2 rounded-lg"
          data-section="reconstruction"
        >
          <span class="text-gray-400">05</span> ä»·å€¼é‡æ„
        </a>
        <a
          href="#conclusion"
          class="nav-section block text-pink-400 hover:text-pink-300 transition-all hover:bg-pink-500/10 px-3 py-2 rounded-lg"
          data-section="conclusion"
        >
          <span class="text-gray-400">ğŸ</span> ç»“å°¾
        </a>
      </div>
      <div class="mt-4 pt-3 border-t border-gray-700">
        <button
          onclick="scrollToTop()"
          class="block w-full text-green-400 hover:text-green-300 transition-all hover:bg-green-500/10 px-3 py-2 rounded-lg cursor-pointer text-center"
        >
          â¬†ï¸ å›åˆ°é¡¶éƒ¨
        </button>
      </div>
    </nav>

    <!-- é¡µé¢è¿›åº¦æŒ‡ç¤ºå™¨ -->
    <div class="nav-indicator">
      <div class="nav-progress" id="navProgress"></div>
    </div>

    <!-- å›¾ç‰‡æ”¾å¤§æ¨¡æ€æ¡† -->
    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
      <span class="modal-close" onclick="closeImageModal()">&times;</span>
      <img id="modalImage" class="modal-content" alt="" />
    </div>

    <!-- å›¾è¡¨æ”¾å¤§æ¨¡æ€æ¡† -->
    <div id="chartModal" class="chart-modal" onclick="closeChartModal()">
      <div class="chart-modal-content" onclick="event.stopPropagation()">
        <span class="chart-modal-close" onclick="closeChartModal()"
          >&times;</span
        >
        <div
          id="modalChart"
          style="width: 100%; height: calc(100% - 40px)"
        ></div>
      </div>
    </div>

    <header
      id="header"
      class="min-h-screen flex flex-col items-center justify-center text-center p-8 relative overflow-hidden"
    >
      <div
        class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-gray-900 to-gray-900 z-0"
      ></div>
      <div
        class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-500/20 rounded-full filter blur-3xl animate-pulse"
      ></div>
      <div
        class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-orange-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"
      ></div>

      <div class="relative z-20 w-full max-w-7xl">
        <h1
          class="text-4xl md:text-8xl font-bold text-white mb-8 tracking-tight leading-tight text-center"
        >
          <span class="block md:inline">æ•°æ®é•œå¤´ä¸‹çš„</span
          ><br class="md:hidden" />
          <span
            class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 animate-pulse"
          >
            æ–°èŒä¸šç”Ÿå­˜å®å½•
          </span>
        </h1>

        <div
          class="max-w-7xl mx-auto mb-12 mt-16 grid lg:grid-cols-5 gap-8 items-center"
        >
          <div
            class="lg:col-span-3 lg:order-2 text-2xl text-gray-300 space-y-6 flex items-center justify-center text-content"
          >
            <p class="leading-relaxed max-w-md">
              è‡ª4æœˆ19æ—¥èµ·ï¼Œæ¯å‘¨å…­å’Œé‡å¤§èŠ‚å‡æ—¥â€œé­…åŠ›é‡åº†â€æ— äººæœºç¯å…‰ç§€åœ¨é‡åº†ä¸¤æ±Ÿå››å²¸æ ¸å¿ƒåŒºå¸¸æ€åŒ–å±•æ¼”ï¼ŒèƒŒåæ˜¯æ— äººæœºé£è¡Œå·¥ç¨‹å¸ˆé™†å­ç¥¥å›¢é˜Ÿæ“ä½œã€‚éšç€ä½ç©ºç»æµçš„è“¬å‹ƒå‘å±•ï¼Œæ— äººæœºé£è¡Œå·¥ç¨‹å¸ˆä½œä¸ºæ–°å…´èŒä¸šé€æ¸è¿›å…¥å¤§å®¶è§†é‡ã€‚
            </p>
          </div>
          <div class="lg:col-span-2 lg:order-1 flex justify-center">
            <div class="relative group">
              <img
                src="figures/chongqing-drone-show-engineer-preparation.jpg"
                alt="é‡åº†æ— äººæœºç¯å…‰ç§€å·¥ç¨‹å¸ˆå‡†å¤‡å·¥ä½œ"
                class="w-full max-w-xs h-auto rounded-xl shadow-2xl border border-gray-600/50 group-hover:shadow-cyan-500/25 transition-all duration-300 group-hover:scale-105 group-hover:border-cyan-500/50 clickable-image"
                onclick="openImageModal(this)"
              />
              <div
                class="absolute inset-0 bg-gradient-to-t from-black/20 to-transparent rounded-xl pointer-events-none"
              ></div>
              <div class="w-full flex justify-center mt-4">
                <p
                  class="text-sm text-gray-400 text-center opacity-75 bg-gray-800/30 px-3 py-1 rounded-full backdrop-blur-sm"
                >
                  <i class="fa fa-camera mr-2"></i>æ¥æºï¼šå¾®åš
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- æ–°èŒä¸šå‘å±•è¶‹åŠ¿å›¾è¡¨ -->
        <div class="w-full max-w-7xl mx-auto mb-16">
          <div class="text-center mb-8 text-content">
            <h3 class="text-2xl md:text-3xl font-bold text-white mb-4">
              æ–°èŒä¸šå‘å¸ƒè¶‹åŠ¿åˆ†æ
            </h3>
            <p class="text-gray-400 text-xl max-w-3xl mx-auto leading-relaxed">
              è‡ª2019å¹´å»ºç«‹æ–°èŒä¸šä¿¡æ¯å‘å¸ƒåˆ¶åº¦ä»¥æ¥ï¼Œäººç¤¾éƒ¨å·²ç´¯è®¡å‘å¸ƒäº†7æ‰¹å…±110ä¸ªæ–°å…´èŒä¸šï¼Œä¸»è¦åˆ†å¸ƒåœ¨äººå·¥æ™ºèƒ½ä¸æ•°å­—ç»æµã€åº·å…»æœåŠ¡ã€ä½ç¢³ç¯ä¿ä¸å·¥ä¸šæŠ€æœ¯ç­‰é¢†åŸŸã€‚æ–°å…´èŒä¸šé€æ¸å…´èµ·ï¼Œäº§ä¸šç»“æ„ã€åœ°åŸŸç»“æ„ã€èŒä¸šæ€§è´¨ã€äººæ‰ç»“æ„ç»´åº¦å‡å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¸šç»“æ„è¿›å…¥äº†â€œåŠ¨æ€é‡ç»„æœŸâ€ã€‚æƒå¨æ•°æ®å°†ä½œä¸ºè¿½å…‰ç¯ï¼Œæ·±å…¥åˆ†ææ–°å…´èŒä¸šçš„å‘å±•ç°çŠ¶ã€èƒŒååŠ¨å› åŠé¢ä¸´çš„é—®é¢˜ï¼Œå±•ç°è¿™åœºèŒä¸šå˜é©çš„å£®é˜”å›¾æ™¯ã€‚
            </p>
          </div>
          <div
            id="header-chart"
            class="w-full h-96 glow-card p-6 chart-container"
          ></div>
        </div>
      </div>
    </header>

    <main id="main-content"></main>

    <footer class="text-center py-10 bg-gray-900 border-t border-gray-800">
      <p class="text-gray-500">&copy; 2025 æ–°èŒä¸šè§‚å¯ŸæŠ¥å‘Š.</p>
    </footer>

    <template id="section-template">
      <section
        class="min-h-screen flex flex-col items-center justify-center text-center p-8 relative overflow-hidden reveal"
      >
        <div
          class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-gray-900 to-gray-900 z-0"
        ></div>
        <div
          class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-500/20 rounded-full filter blur-3xl animate-pulse"
        ></div>
        <div
          class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-orange-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"
        ></div>

        <div class="relative z-20 w-full max-w-7xl">
          <h2
            class="text-4xl md:text-8xl font-bold text-white mb-8 tracking-tight leading-tight text-center"
          ></h2>
          <div
            class="subtitle text-center text-gray-300 mb-16 text-2xl max-w-4xl mx-auto leading-relaxed text-content"
          ></div>
          <div class="content-wrapper"></div>
        </div>
      </section>
    </template>

    <template id="intro-template">
      <section
        class="min-h-screen flex flex-col items-center justify-center text-center p-8 relative overflow-hidden reveal"
      >
        <div
          class="absolute inset-0 bg-gradient-to-br from-blue-900/50 via-gray-900 to-gray-900 z-0"
        ></div>
        <div
          class="absolute -top-1/4 -left-1/4 w-1/2 h-1/2 bg-blue-500/20 rounded-full filter blur-3xl animate-pulse"
        ></div>
        <div
          class="absolute -bottom-1/4 -right-1/4 w-1/2 h-1/2 bg-orange-500/20 rounded-full filter blur-3xl animate-pulse delay-1000"
        ></div>
        <div
          id="danmaku-container"
          class="absolute inset-0 z-10"
          aria-hidden="true"
        ></div>
        <div class="relative z-20 w-full max-w-7xl">
          <h2
            class="text-4xl md:text-8xl font-bold text-white mb-8 tracking-tight leading-tight text-center"
          ></h2>
        </div>
      </section>
    </template>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const contentTemplates = {
          status: `<div class="space-y-20"><div class="text-center max-w-5xl mx-auto text-content fullscreen-text">åœ¨äººç¤¾éƒ¨2023å¹´ä¿®è®¢çš„ã€Šæ–°èŒä¸šè¯„å®¡å·¥ä½œè§„åˆ™ã€‹ä¸­ï¼ŒèŒä¸šè®¤è¯éœ€ç»ç”³æŠ¥ã€è¯„å®¡ã€å…¬ç¤ºç­‰äº”æ­¥æµç¨‹ï¼Œå¹³å‡è€—æ—¶18ä¸ªæœˆã€‚ä»¥â€œè€å¹´æ•°å­—æœåŠ¡å¸ˆâ€ä¸ºä¾‹ï¼Œè¯¥èŒä¸šä»æ°‘é—´ç§°å‘¼åˆ°å®˜æ–¹è®¤è¯ï¼Œç»å†äº†ä»â€œè€å¹´æ•°å­—è¾…å¯¼å‘˜â€â€œé“¶å‘ç”Ÿæ´»è§„åˆ’å¸ˆâ€åˆ°ç»Ÿä¸€èŒä¸šæ ‡å‡†çš„è½¬å˜ã€‚è¿™ä¸€è¿‡ç¨‹ï¼Œæ—¢ä½“ç°å¯¹èŒä¸šè§„èŒƒæ€§çš„é«˜åº¦é‡è§†ï¼Œä¹Ÿåæ˜ æ–°å…´èŒä¸šè®¤è¯çš„å¤æ‚æ€§ä¸ä¸¥è°¨æ€§ã€‚</div><div class="lifecycle-chart w-full h-[30vh] glow-card p-6 chart-container fullscreen-chart"></div><div class="text-center max-w-5xl mx-auto text-content fullscreen-text">ä¸æ­¤åŒæ—¶ï¼Œæ–°å…´èŒä¸šåœ¨ä¸åŒåœ°åŸŸå‘ˆç°å‡ºä¸åŒå‘å±•æ€åŠ¿ã€‚åœ¨äº¬æ´¥å†€ã€é•¿ä¸‰è§’ä¸ç ä¸‰è§’ï¼ŒçŒå¤´ä»¬ä¸ºâ€œäººå·¥æ™ºèƒ½è®­ç»ƒå¸ˆâ€â€œç¢³æ’æ”¾ç®¡ç†å‘˜â€å¼€å‡º25â€”40ä¸‡å…ƒå¹´è–ªï¼Œå¤–åŠ æœŸæƒä¸è½æˆ·æŒ‡æ ‡ï¼›åŒä¸€æ¡æ‹›è˜å¯äº‹ï¼Œ24å°æ—¶å†…å°±èƒ½æ”¶åˆ°ä¸Šåƒä»½ç®€å†ã€‚è€Œåœ¨è¥¿éƒ¨ä¸ä¸œåŒ—ï¼ŒåŒæ ·çš„å²—ä½æ‹›è˜é‡ä¸è¶³ä¸œéƒ¨çš„äº”åˆ†ä¹‹ä¸€ã€‚ä¼ä¸šHRåªèƒ½æŠŠJDæ”¹æˆâ€œå¯è¿œç¨‹ã€å¯å…¼èŒã€å¯åŸ¹è®­ä¸Šå²—â€ï¼Œå´ä¾æ—§æ— äººé—®æ´¥ã€‚è¿™é“è£‚ç¼ï¼Œä¸€é¢æ˜¯äº§ä¸šå¯†åº¦â€”â€”ä¸œéƒ¨æ‹¥æœ‰æ›´å®Œæ•´çš„ä¸Šä¸‹æ¸¸é…å¥—ï¼Œè®©æ–°èŒä¸šèƒ½å¤Ÿâ€œå³æ’å³ç”¨â€ï¼›å¦ä¸€é¢æ˜¯æ”¿ç­–è„‰å†²â€”â€”åœ°æ–¹è¡¥è´´ã€äººæ‰å…¬å¯“ã€ç¨æ”¶ä¼˜æƒ åƒç£é“ä¸€æ ·æŠŠå¹´è½»äººå¸èµ°ã€‚æ–°èŒä¸šåœ¨ä¸åŒåœ°åŸŸå‘ˆç°å‡ºæˆªç„¶ä¸åŒçš„ç”Ÿå‘½ä½“å¾ã€‚</div>`,
          drivers: `
          <div class="text-center max-w-5xl mx-auto text-content fullscreen-text">
              æ–°å…´èŒä¸šçš„çˆ†å‘å¹¶éå¶ç„¶ï¼Œè€Œæ˜¯æŠ€æœ¯çªç ´ã€å¸‚åœºéœ€æ±‚ä¸æ”¿ç­–å¼•å¯¼å…±åŒä½œç”¨çš„ç»“æœã€‚
            </div><div class="text-center max-w-5xl mx-auto text-content fullscreen-text">
              ä¸€æ¡GPUæ›²çº¿ï¼Œå‚¬ç”Ÿä¸€ä¸ªèŒä¸šã€‚2022 å¹´ï¼Œè‹±ä¼Ÿè¾¾å‘å¸ƒH100èŠ¯ç‰‡ï¼ŒAIè®­ç»ƒé€Ÿåº¦è¾ƒå‰ä»£æå‡9å€ã€‚ä¸‰ä¸ªæœˆåï¼ŒåŒ—äº¬ä¸€å®¶å¤§æ¨¡å‹åˆåˆ›å…¬å¸æŠŠâ€œAIè®­ç»ƒå¸ˆâ€å²—ä½ä»3äººæ‰©ç¼–åˆ°47äººï¼Œèµ·è–ªç›´æ¥ç¿»å€ã€‚æŠ€æœ¯åƒä¸€æ¡é™¡å³­çš„GPUæ€§èƒ½æ›²çº¿ï¼ŒæŠŠç®—åŠ›æˆæœ¬æ‰“ä¸‹æ¥ï¼Œäºæ˜¯â€œå–‚æ•°æ®ã€è°ƒå‚æ•°ã€æ¸…è„æ•°æ®â€ä»å®éªŒå®¤æ‚æ´»å˜æˆç‹¬ç«‹å·¥ç§ã€‚åŒæ ·çš„æ•…äº‹ä¹Ÿå‘ç”Ÿåœ¨æ‰‹æœ¯æœºå™¨äººèµ›é“ï¼šè¾¾èŠ¬å¥‡ç³»ç»Ÿè¿­ä»£åˆ°ç¬¬äº”ä»£ï¼Œæ–°å¢â€œåŠ›åé¦ˆâ€åŠŸèƒ½ï¼ŒåŒ»é™¢ç«‹åˆ»åœ¨æ‹›è˜æ é‡Œå†™ä¸‹â€œæœºå™¨äººè°ƒè¯•å·¥ç¨‹å¸ˆâ€â€”â€”å·¥ç¨‹å¸ˆçš„æŒ‡å°–ï¼Œç¬¬ä¸€æ¬¡ä¼¸è¿›äº†äººä½“è…¹è…”ã€‚
            </div>
            <div class="text-center max-w-5xl mx-auto text-content fullscreen-text">
              ä¸€åªçŒ«ã€ä¸€ä½è€äººï¼Œéƒ½èƒ½å¼€å‡ºä¸€å¼ å²—ä½è®¢å•ã€‚æ®ã€Š2024ä¸­å›½å® ç‰©è¡Œä¸šç™½çš®ä¹¦ã€‹æ˜¾ç¤ºï¼Œ2024å¹´ä¸­å›½å® ç‰©å¸‚åœºè§„æ¨¡çªç ´3000äº¿å…ƒï¼Œé«˜ç«¯ç«åŒ–ç‚‰ã€çºªå¿µæ™¶çŸ³ã€å® ç‰©å‘Šåˆ«ä»ªå¼éœ€æ±‚æš´æ¶¨ã€‚â€œå® ç‰©æ®¡è‘¬å¸ˆâ€ä»å†·é—¨åŒæƒ…æœåŠ¡ï¼Œå˜æˆæŒ‰ä½“é‡ã€æŒ‰ä»ªå¼å¥—é¤æ”¶è´¹çš„æ ‡å‡†åŒ–èŒä¸šï¼Œä¸Šæµ·é¡¶çº§é—¨åº—å®¢å•ä»·8000å…ƒä»è¦æ’é˜Ÿä¸¤å‘¨ã€‚ä¼´éšç€è€é¾„åŒ–æé€Ÿï¼Œå…¨å›½60å²ä»¥ä¸Šäººå£2.97äº¿ï¼Œå…¶ä¸­38%ä¸ä¼šç”¨æ™ºèƒ½æ‰‹æœºã€‚è€å¹´å¤§å­¦è¯¾å ‚é‡Œï¼Œå‡ºç°äº†ä¸€ç§æ–°èŒä¸šâ€”â€”â€œè€å¹´æ•°å­—æœåŠ¡å¸ˆâ€ï¼Œä¸€å¯¹ä¸€æ•™å­¦90åˆ†é’ŸåŒ—äº¬ã€ä¸Šæµ·è€å¹´å¤§å­¦å¯¹å¤–æŠ¥ä»·æ”¶è´¹å¯è¾¾200å…ƒï¼ŒèŠ‚å‡æ—¥æ’æœŸæ¯”ä¸‰ç”²åŒ»é™¢å‰¯ä¸»ä»»åŒ»å¸ˆè¿˜æ»¡ã€‚éœ€æ±‚ä¸å†æ˜¯æŠ½è±¡çš„äººå£ç»“æ„ï¼Œè€Œæ˜¯ä¸€åªçŒ«ã€ä¸€ä½è€äººçš„æ—¥å¸¸ç—›ç‚¹ï¼Œè¢«æ˜ç æ ‡ä»·æˆæ–°çš„åŠ³åŠ¨å…¥å£
              </div>
              <div class="topten-chart w-full h-[40vh] mt-8 glow-card p-6 chart-container fullscreen-chart"></div>
              <div class = "text-center max-w-5xl mx-auto text-content fullscreen-text">
                ä¸€çº¸åå½•ï¼Œæ’¬åŠ¨èµ„æœ¬ä¸ç¤¾ä¿çš„æ æ†ã€‚åœ¨2023å¹´ï¼Œâ€œç¢³æ’æ”¾ç®¡ç†å‘˜â€è¢«æ­£å¼å†™è¿›å›½å®¶èŒä¸šåˆ†ç±»å¤§å…¸ã€‚å„å¤§æ‹›è˜appä¸Šï¼Œç«é€Ÿä¸Šçº¿è¯¥å²—ä½éœ€æ±‚ã€‚æ”¿ç­–åƒèŠ‚æ‹å™¨ï¼ŒæŠŠåŸæœ¬æ¨ªå†²ç›´æ’çš„å¸‚åœºå†²åŠ¨ï¼Œæ ¡å‡†åˆ°å¯è½åœ°ã€å¯æ‰©å¼ ã€å¯å¤åˆ¶çš„èŠ‚å¥é‡Œã€‚
              </div>
              <div class = "text-center max-w-5xl mx-auto text-content fullscreen-text">
                æŠ€æœ¯æŠŠâ€œä¸å¯èƒ½â€å˜æˆâ€œå¯è¡Œâ€ï¼Œéœ€æ±‚æŠŠâ€œå¯è¡Œâ€å˜æˆâ€œå¿…é¡»â€ï¼Œæ”¿ç­–å†æŠŠâ€œå¿…é¡»â€å˜æˆâ€œå¯æŒç»­â€ã€‚å½“ä¸‰æ¡æ›²çº¿åœ¨åŒä¸€æ—¶ç‚¹äº¤æ±‡â€”â€”ç®—åŠ›æˆæœ¬è·Œç ´å¿ƒç†ä»·ä½ã€ç”¨æˆ·ç—›ç‚¹è¾¾åˆ°ä»˜è´¹é˜ˆå€¼ã€åˆ¶åº¦åˆšå¥½é€’ä¸Šåˆæ³•èº«ä»½â€”â€”æ–°èŒä¸šä¾¿ä¸å†æ˜¯é£å£ä¸Šçš„æ³¡æ²«ï¼Œè€Œæ˜¯æ—¶ä»£åœ¨å°±ä¸šåœ°å›¾ä¸Šæ‘ä¸‹çš„â€œç¡®è®¤é”®â€ã€‚
              </div>
              <!--
            <div class="sankey-chart w-full h-[50vh] glow-card p-6 chart-container fullscreen-chart"></div>
            -->
          `,
          rectification: `
            <div class="text-center max-w-5xl mx-auto text-content fullscreen-text">
              èŒä¸šåç§°çš„"æ­£å"è¿‡ç¨‹ï¼Œè—ç€è¡Œä¸šæˆç†Ÿçš„å¯†ç ã€‚2022å¹´"é“¶å‘ç»æµ"ç›¸å…³å²—ä½ä¸­ï¼Œ38%çš„æ‹›è˜ä¿¡æ¯ä½¿ç”¨"è€å¹´æ•°å­—è¾…å¯¼å‘˜""é“¶å‘ç”Ÿæ´»è§„åˆ’å¸ˆ"ç­‰æ°‘é—´ç§°å‘¼ï¼Œç›´åˆ°2024 å¹´ "è€å¹´æ•°å­—æœåŠ¡å¸ˆ"è¢«çº³å…¥æ–°èŒä¸šç›®å½•ï¼Œæ‰å½¢æˆç»Ÿä¸€çš„èŒä¸šæ ‡å‡†ã€‚
            </div>
            <div class="rectification-word-clouds w-full h-[40vh] mt-8 chart-container fullscreen-chart"></div>
          `,
          predicament: `
            <div class="text-center max-w-5xl mx-auto text-content fullscreen-text">
              ä»è¡Œä¸šå®è·µæ¥çœ‹ï¼Œç›®å‰110ä¸ªå®˜æ–¹è®¤è¯èŒä¸šè¿œä¸è¶³ä»¥æ¶µç›–å¸‚é¢ä¸Šå‡ºç°çš„å…¨éƒ¨æ–°å‹èŒä¸šï¼Œå¤šç§æ°‘é—´å‘½åå²—ä½å°šæœªæ‹¥æœ‰â€œå®˜æ–¹å§“åâ€ã€‚ä»¥â€œæœºå™¨äººè°ƒè¯•å·¥ç¨‹å¸ˆâ€ä¸ºä¾‹ï¼Œ2025å¹´æ•°æ®æ˜¾ç¤ºï¼Œæ‹›è˜å¢é€Ÿè¶…30%ï¼Œç›®å‰å½’ç±»äºâ€œå·¥ä¸šæœºå™¨äººç³»ç»Ÿè¿ç»´å‘˜â€ï¼ˆå·¥ç§ï¼‰ï¼Œä½†è‡³ä»Šä»æœªè¢«çº³å…¥å®˜æ–¹èŒä¸šä½“ç³»ã€‚è¿™ç±»â€œæœªè®¤è¯èŒä¸šâ€å¤šåœç•™åœ¨å°šæœªè¢«å®˜æ–¹è®¤è¯çš„é˜¶æ®µã€‚
            </div>
            <div class="rights-barchart w-full h-[40vh] mt-8 glow-card p-6 chart-container fullscreen-chart"></div>
            <!-- Top10 å›¾è¡¨ï¼ˆåŸºäº ref/topten.png çš„æ ·å¼æ¨¡æ¿ï¼‰ -->
            
          `,
          reconstruction: `
            <div class="text-center max-w-6xl mx-auto space-y-6 text-content fullscreen-text">
              <p>å®‹é¾™æ°ä»ä¸€çº¿æ”¶æ´¾ä»¶åˆ°è·è¯„"æµå—å¸‚æŠ€æœ¯èƒ½æ‰‹"ï¼Œå†åˆ°æˆä¸ºé¦–æ‰¹Eç±»é«˜å±‚æ¬¡äººæ‰ï¼Œä»–çš„é€†è¢­æˆä¸ºæ•°ä¸‡ä»ä¸šè€…çš„ç¼©å½±ã€‚</p>
              <p>å½“ä»£å¹´è½»äººæ¸´æœ›æ‘†è„±ä¼ ç»ŸèŒåœºçš„æŸç¼šã€è¿½æ±‚æ›´åŠ çµæ´»çš„å·¥ä½œæ–¹å¼çš„æ€åº¦ã€‚ä»–ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨è‡ªå·±çš„èŠ‚å¥ä¸‹å·¥ä½œï¼Œå……åˆ†å‘æŒ¥åˆ›é€ åŠ›ï¼ŒåŒæ—¶äº«å—ç”Ÿæ´»çš„å¹³è¡¡ã€‚</p>
            </div>
            <div class="factors-piechart w-full h-[40vh] mt-8 chart-container fullscreen-chart"></div>
          `,
          conclusion: `
            <div class="text-center max-w-6xl mx-auto space-y-6 text-content fullscreen-text">
              <p>ä»ç”µå½±ã€Šå¥¹ã€‹èµ°å‡ºçš„äººå·¥æ™ºèƒ½æ•°å­—äººè®­ç»ƒå¸ˆï¼Œä»ã€ŠèŠæ–‹å¿—å¼‚ã€‹èµ°å‡ºçš„æœåŠ¡çŠ¬é©¯å…»å¸ˆâ€¦â€¦æ–°å…´èŒä¸šçš„ç”Ÿé•¿å²ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸ªä½“ä»·å€¼ä¸æ—¶ä»£éœ€æ±‚çš„"åŠ¨æ€åº”ç­”"ã€‚</p>
              <p>ä»æŠ€æœ¯é©±åŠ¨åˆ°æ”¿ç­–è§„èŒƒï¼Œä»æƒç›Šä¿éšœåˆ°ä»·å€¼é‡æ„ï¼Œæ¯ä¸€ç»„æ•°æ®çš„æ³¢åŠ¨ï¼Œéƒ½åœ¨ä¹¦å†™ç€å°±ä¸šå¸‚åœºçš„æ–°è§„åˆ™â€”â€”è€Œé‚£äº›å°šæœªè¢«å‘½åçš„èŒä¸šï¼Œæˆ–è®¸æ­£è—ç€æœªæ¥ç¤¾ä¼šçš„æ¨¡æ ·ã€‚</p>
            </div>
            <div class="future-map w-full h-[35vh] mt-8 glow-card p-6 chart-container fullscreen-chart relative"></div>
            <div class="mt-8 text-center text-content fullscreen-text">
              <p class="text-2xl mb-6 text-gray-300">ä½ è®¤ä¸ºä¸‹ä¸€ä¸ªè¢«è®¤è¯çš„èŒä¸šä¼šæ˜¯ï¼Ÿ</p>
              <div class="flex justify-center gap-4 max-w-lg mx-auto">
                <input type="text" placeholder="è¾“å…¥ä½ çš„æƒ³æ³•..." class="bg-gray-700/50 border border-gray-600 rounded-xl px-6 py-4 text-white focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent flex-1 backdrop-blur-sm text-lg">
                <button class="bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-4 px-8 rounded-xl transition-all hover:scale-105 hover:shadow-lg hover:shadow-cyan-500/25 text-lg">æäº¤</button>
              </div>
            </div>
          `,
        };
        const sections = [
          {
            id: "status-intro",
            title: "01. è¡Œä¸šç°çŠ¶",
            isIntro: true,
            setup: setupStatusIntro,
          },
          { id: "status", title: "", setup: setupStatusCharts },
          {
            id: "drivers",
            title: "02. é©±åŠ¨å¯†ç ",
            setup: (el) => { setupSankeyChart(el); setupTopTenChart(el); },
          },
          //{
          //  id: "rectification",
          //  title: '03. "æ­£å"æ—¶é—´',
          //  setup: setupRectificationCharts,
          //},
          { id: "predicament", title: "04. è¡Œä¸šå›°å¢ƒ", setup: setupRightsChart },
          {
            id: "reconstruction",
            title: "05. ä»·å€¼é‡æ„",
            setup: setupReconstructionChart,
          },
          { id: "conclusion", title: "ç»“å°¾", setup: setupConclusionChart },
        ];
        const echartsTooltipOption = {
          backgroundColor: "rgba(17, 24, 39, 0.95)",
          borderColor: "rgba(255, 255, 255, 0.1)",
          borderWidth: 1,
          borderRadius: 8,
          textStyle: {
            color: "#D1D5DB",
            fontSize: 12,
            lineHeight: 1.4,
          },
          extraCssText: `
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
          `,
          className: "echarts-tooltip",
        };

        function initPage() {
          initHeaderChart();

          const mainContent = document.getElementById("main-content");
          const sectionTemplate = document.getElementById("section-template");
          const introTemplate = document.getElementById("intro-template");
          if (!mainContent || !sectionTemplate || !introTemplate) {
            console.error("Essential elements not found!");
            return;
          }

          sections.forEach((data) => {
            let sectionClone;
            if (data.isIntro) {
              sectionClone = introTemplate.content.cloneNode(true);
              const sectionEl = sectionClone.querySelector("section");
              sectionEl.id = data.id;
              sectionClone.querySelector("h2").innerHTML = data.title;
            } else {
              sectionClone = sectionTemplate.content.cloneNode(true);
              const sectionEl = sectionClone.querySelector("section");
              sectionEl.id = data.id;
              sectionClone.querySelector("h2").innerHTML = data.title;
              const subtitleEl = sectionClone.querySelector(".subtitle");
              if (data.subtitle) {
                subtitleEl.innerHTML = data.subtitle;
              } else {
                subtitleEl.remove();
              }
              if (contentTemplates[data.id]) {
                sectionClone.querySelector(".content-wrapper").innerHTML =
                  contentTemplates[data.id];
              }
            }

            mainContent.appendChild(sectionClone);
            if (data.setup) {
              try {
                const sectionEl = mainContent.querySelector(`#${data.id}`);
                data.setup(sectionEl);
              } catch (e) {
                console.error(`Error setting up section "${data.id}":`, e);
              }
            }
          });

          setupScrollAnimations();
        }

        function setupScrollAnimations() {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  // æ·»åŠ å°å»¶è¿Ÿåˆ›å»ºæ›´æµç•…çš„åŠ¨ç”»æ•ˆæœ
                  setTimeout(() => {
                    entry.target.classList.add("visible");
                  }, entry.target.dataset.delay || 0);
                  observer.unobserve(entry.target);
                }
              });
            },
            {
              rootMargin: "0px 0px -100px 0px",
              threshold: 0.1,
            }
          );

          document.querySelectorAll(".reveal").forEach((el, index) => {
            // ä¸ºæ¯ä¸ªå…ƒç´ æ·»åŠ é€’å¢çš„å»¶è¿Ÿ
            el.dataset.delay = index * 100;
            observer.observe(el);
          });
        }

        function setupDanmaku() {
          const container = document.getElementById("danmaku-container");
          if (!container) return;

          const danmakuItems = [
            {
              text: 'è¯´çš„å¤ªå¥½äº†ï¼Œæœªæ¥çš„èŒåœºï¼Œåªæœ‰"é‡‘æ‰‹è‰º"ï¼Œæ²¡æœ‰"é“é¥­ç¢—"ï¼ï¼ï¼',
              likes: "170",
            },
            {
              text: "æ•°æ®åˆ†æå¸ˆï¼Œå­¦è´¹åŸºæœ¬2ä¸‡ä»¥ä¸Šï¼Œåˆšå‡ºæ¥å·¥èµ„åŸºæœ¬ç¨å‰8000å·¦å³",
              likes: "2872",
            },
            { text: "æ–°èŒä¸š+æ–°å·¥ç§+è€å‘˜å·¥+è€æŠ€æœ¯=åŠæ–°è¯", likes: "2182" },
            { text: "å–æ¶ˆåŠ³åŠ¡æ´¾é£", likes: "5231" },
            {
              text: "å…»è€æœåŠ¡å¸ˆç»å¯¹åƒé¦™ï¼Œç°åœ¨çš„ä¸­å›½å·±ç»è¿›å…¥äººå£è€é¾„åŒ–äº†",
              likes: "273",
            },
            { text: "è¿™äº›è¡Œä¸šè¯¥æ€ä¹ˆå…¥è¡Œå‘¢", likes: "8769" },
            { text: "æ–°å…´èŒä¸šçš„å‡ºç°ä¹Ÿç»™äº†å¹´è½»äººæ›´å¤šçš„é€‰æ‹©æœºä¼š", likes: "1086" },
            {
              text: "ä¼ ç»Ÿè¡Œä¸šè¢«ç”·çš„å æ®å¤ªä¹…äº†ï¼Œæ–°å…´è¡Œä¸šå¥³æ€§å¯ä»¥ç›´æ¥å‚ä¸",
              likes: "4549",
            },
          ];

          // ä¼˜åŒ–å¼¹å¹•åˆ›å»ºï¼Œå‡å°‘é‡å¤ä»£ç 
          const createDanmaku = (item, index) => {
            const wrapper = document.createElement("div");
            wrapper.className = "scroll-text";
            wrapper.style.top = `${8 + (index % 8) * 11}%`;
            wrapper.style.animationDuration = `${12 + Math.random() * 8}s`;
            wrapper.style.animationDelay = `${
              index * 1.5 + Math.random() * 2
            }s`;

            const el = document.createElement("div");
            el.className = "danmaku";
            el.innerHTML = `
              <span>${item.text}</span>
              <span class="likes" style="margin-left: 8px; display: inline-flex; align-items: center; gap: 4px;">
                <span style="font-size: 12px;">ğŸ‘</span>
                <span>${item.likes}</span>
              </span>
            `;

            // ä½¿ç”¨äº‹ä»¶å§”æ‰˜ä¼˜åŒ–æ€§èƒ½
            const handleMouseEnter = () =>
              (wrapper.style.animationPlayState = "paused");
            const handleMouseLeave = () =>
              (wrapper.style.animationPlayState = "running");

            el.addEventListener("mouseenter", handleMouseEnter, {
              passive: true,
            });
            el.addEventListener("mouseleave", handleMouseLeave, {
              passive: true,
            });

            wrapper.appendChild(el);
            return wrapper;
          };

          // ä½¿ç”¨ DocumentFragment ä¼˜åŒ– DOM æ“ä½œ
          const fragment = document.createDocumentFragment();
          danmakuItems.forEach((item, i) => {
            fragment.appendChild(createDanmaku(item, i));
          });
          container.appendChild(fragment);
        }

        function initHeaderChart() {
          // ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–å›¾è¡¨åˆå§‹åŒ–æ—¶æœº
          requestAnimationFrame(() => {
            const chartElement = document.getElementById("header-chart");
            if (!chartElement) {
              console.error("Header chart element not found");
              return;
            }

            // æ£€æŸ¥å…ƒç´ æ˜¯å¦å·²ç»åˆå§‹åŒ–è¿‡
            if (chartElement.hasAttribute("data-chart-initialized")) return;
            chartElement.setAttribute("data-chart-initialized", "true");

            const headerChart = echarts.init(chartElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.headerChart = headerChart;

            const years = [
              "2019å¹´",
              "2020å¹´",
              "2021å¹´",
              "2022å¹´",
              "2024å¹´",
              "2025å¹´",
            ];
            const jobCounts = [13, 16, 18, 18, 19, 17];
            const growthRates = [0, 23.08, 12.5, 0, 5.56, -10.53];

            const option = {
              title: {
                text: "æ–°å…´èŒä¸šå‘å¸ƒè¶‹åŠ¿",
                left: "center",
                textStyle: {
                  color: "#fff",
                  fontSize: 20,
                  fontWeight: "bold",
                },
              },
              tooltip: {
                trigger: "axis",
                axisPointer: {
                  type: "cross",
                  crossStyle: { color: "#999" },
                },
                ...echartsTooltipOption,
                formatter: function (params) {
                  let result = `<div style="font-weight: bold; margin-bottom: 5px;">${params[0].axisValue}</div>`;
                  params.forEach((param) => {
                    const marker = `<span style="display: inline-block; width: 10px; height: 10px; border-radius: 50%; background: ${param.color}; margin-right: 5px;"></span>`;
                    const unit = param.seriesName.includes("æ•°é‡") ? "ä¸ª" : "%";
                    result += `${marker}${param.seriesName}: ${param.value}${unit}<br/>`;
                  });
                  return result;
                },
              },
              legend: {
                data: ["æ–°å¢èŒä¸šæ•°é‡", "å¢é•¿é€Ÿåº¦"],
                top: "12%",
                textStyle: { color: "#fff", fontSize: 12 },
              },
              xAxis: [
                {
                  type: "category",
                  data: years,
                  axisPointer: { type: "shadow" },
                  axisLabel: { color: "#9CA3AF", fontSize: 11 },
                  axisLine: { lineStyle: { color: "#4B5563" } },
                },
              ],
              yAxis: [
                {
                  type: "value",
                  name: "èŒä¸šæ•°é‡",
                  min: 0,
                  max: 25,
                  interval: 5,
                  axisLabel: {
                    formatter: "{value} ä¸ª",
                    color: "#9CA3AF",
                  },
                  nameTextStyle: { color: "#9CA3AF" },
                  axisLine: { lineStyle: { color: "#4B5563" } },
                  splitLine: {
                    lineStyle: { color: "#374151", type: "dashed" },
                  },
                },
                {
                  type: "value",
                  name: "å¢é•¿é€Ÿåº¦",
                  min: -20,
                  max: 30,
                  interval: 10,
                  axisLabel: {
                    formatter: "{value}%",
                    color: "#9CA3AF",
                  },
                  nameTextStyle: { color: "#9CA3AF" },
                  axisLine: { lineStyle: { color: "#4B5563" } },
                  splitLine: { show: false },
                },
              ],
              series: [
                {
                  name: "æ–°å¢èŒä¸šæ•°é‡",
                  type: "bar",
                  data: jobCounts,
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                      { offset: 0, color: "#60A5FA" },
                      { offset: 0.5, color: "#3B82F6" },
                      { offset: 1, color: "#1E40AF" },
                    ]),
                    borderRadius: [4, 4, 0, 0],
                  },
                  emphasis: {
                    itemStyle: {
                      color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                        { offset: 0, color: "#93C5FD" },
                        { offset: 1, color: "#3B82F6" },
                      ]),
                    },
                  },
                  label: {
                    show: true,
                    position: "top",
                    color: "#fff",
                    fontSize: 11,
                    fontWeight: "bold",
                  },
                },
                {
                  name: "å¢é•¿é€Ÿåº¦",
                  type: "line",
                  yAxisIndex: 1,
                  data: growthRates,
                  itemStyle: { color: "#F97316" },
                  lineStyle: {
                    color: "#F97316",
                    width: 3,
                    shadowColor: "rgba(249, 115, 22, 0.3)",
                    shadowBlur: 8,
                  },
                  symbol: "circle",
                  symbolSize: 8,
                  emphasis: {
                    symbolSize: 12,
                    lineStyle: { width: 4 },
                  },
                  label: {
                    show: true,
                    position: "top",
                    formatter: "{c}%",
                    color: "#F97316",
                    fontSize: 10,
                    fontWeight: "bold",
                  },
                },
              ],
              grid: {
                left: "10%",
                right: "10%",
                bottom: "15%",
                top: "30%",
              },
              animationDuration: 1500,
              animationEasing: "cubicOut",
            };

            headerChart.setOption(option);

            // å­˜å‚¨å›¾è¡¨å®ä¾‹ä»¥ä¾¿ç»Ÿä¸€æ¸…ç†å’Œ resizeï¼ˆä½¿ç”¨å…¨å±€ ResizeObserver / å…¨å±€èŠ‚æµ resizeï¼‰
            chartElement._chartInstance = headerChart;
          });
        }

        function setupStatusIntro(section) {
          const container = section.querySelector("#danmaku-container");
          if (!container) return;
          const danmakuItems = [
            {
              text: 'è¯´çš„å¤ªå¥½äº†ï¼Œæœªæ¥çš„èŒåœºï¼Œåªæœ‰"é‡‘æ‰‹è‰º"ï¼Œæ²¡æœ‰"é“é¥­ç¢—"ï¼ï¼ï¼',
              likes: "170",
            },
            {
              text: "æ•°æ®åˆ†æå¸ˆï¼Œå­¦è´¹åŸºæœ¬2ä¸‡ä»¥ä¸Šï¼Œåˆšå‡ºæ¥å·¥èµ„åŸºæœ¬ç¨å‰8000å·¦å³",
              likes: "2872",
            },
            { text: "æ–°èŒä¸š+æ–°å·¥ç§+è€å‘˜å·¥+è€æŠ€æœ¯=åŠæ–°è¯", likes: "2182" },
            { text: "å–æ¶ˆåŠ³åŠ¡æ´¾é£", likes: "5231" },
            {
              text: "å…»è€æœåŠ¡å¸ˆç»å¯¹åƒé¦™ï¼Œç°åœ¨çš„ä¸­å›½å·±ç»è¿›å…¥äººå£è€é¾„åŒ–äº†",
              likes: "273",
            },
            { text: "è¿™äº›è¡Œä¸šè¯¥æ€ä¹ˆå…¥è¡Œå‘¢", likes: "8769" },
            { text: "æ–°å…´èŒä¸šçš„å‡ºç°ä¹Ÿç»™äº†å¹´è½»äººæ›´å¤šçš„é€‰æ‹©æœºä¼š", likes: "1086" },
            {
              text: "ä¼ ç»Ÿè¡Œä¸šè¢«ç”·çš„å æ®å¤ªä¹…äº†ï¼Œæ–°å…´è¡Œä¸šå¥³æ€§å¯ä»¥ç›´æ¥å‚ä¸",
              likes: "4549",
            },
          ];
          danmakuItems.forEach((item, i) => {
            const wrapper = document.createElement("div");
            wrapper.className = "scroll-text";
            // æ”¹è¿›å¼¹å¹•å‚ç›´åˆ†å¸ƒï¼Œç¡®ä¿æ›´å‡åŒ€è¦†ç›–å±å¹•
            wrapper.style.top = `${5 + (i % 8) * 11}%`;
            // è°ƒæ•´åŠ¨ç”»æŒç»­æ—¶é—´å’Œå»¶è¿Ÿï¼Œè®©å¼¹å¹•æ›´è¿ç»­ï¼Œé€Ÿåº¦æ›´å¿«
            wrapper.style.animationDuration = `${8 + Math.random() * 7}s`;
            wrapper.style.animationDelay = `${i * 2 + Math.random() * 3}s`;
            const el = document.createElement("div");
            el.className = "danmaku";
            el.innerHTML = `
              <span>${item.text}</span>
              <span class="likes" style="margin-left: 8px; display: inline-flex; align-items: center; gap: 4px;">
                <span style="font-size: 12px;">ğŸ‘</span>
                <span>${item.likes}</span>
              </span>
            `;

            // æ·»åŠ é¼ æ ‡æ‚¬åœæš‚åœåŠŸèƒ½
            el.addEventListener("mouseenter", () => {
              wrapper.style.animationPlayState = "paused";
            });

            el.addEventListener("mouseleave", () => {
              wrapper.style.animationPlayState = "running";
            });

            wrapper.appendChild(el);
            container.appendChild(wrapper);
          });
        }

        function setupStatusCharts(section) {
          // æ·»åŠ å»¶è¿Ÿç¡®ä¿DOMå®Œå…¨æ¸²æŸ“
          setTimeout(() => {
            const lifecycleElement = section.querySelector(".lifecycle-chart");
            if (!lifecycleElement) {
              console.error("Lifecycle chart element not found");
              return;
            }
            const lifecycleChart = echarts.init(lifecycleElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.lifecycleChart = lifecycleChart;
            lifecycleChart.setOption({
              tooltip: { ...echartsTooltipOption },
              series: [
                {
                  type: "graph",
                  layout: "none",
                  symbolSize: [100, 60],
                  roam: false,
                  label: {
                    show: true,
                    color: "#fff",
                    fontSize: 11,
                    fontWeight: "bold",
                    formatter: function (params) {
                      return params.name;
                    },
                  },
                  tooltip: {
                    show: true,
                    backgroundColor: "rgba(0,0,0,0.8)",
                    borderColor: "#4B5563",
                    borderWidth: 1,
                    textStyle: {
                      color: "#fff",
                      fontSize: 12,
                    },
                    formatter: function (params) {
                      const descriptions = {
                        é¢„ç ”é˜¶æ®µ:
                          "<b>é¢„ç ”é˜¶æ®µ</b><br/>ğŸ“‹ å‰æœŸç ”ç©¶å‡†å¤‡<br/>â€¢ æŠ€æœ¯å¯è¡Œæ€§åˆ†æ<br/>â€¢ å¸‚åœºéœ€æ±‚è°ƒç ”<br/>â€¢ é£é™©è¯„ä¼°æŠ¥å‘Š",
                        æ­£å¼ç”³æŠ¥:
                          "<b>æ­£å¼ç”³æŠ¥</b><br/>ğŸ“ æäº¤ç”³æŠ¥ææ–™<br/>â€¢ å®Œæ•´ç”³æŠ¥æ–‡ä»¶<br/>â€¢ æ ‡å‡†ç”³æŠ¥è¡¨æ ¼<br/>â€¢ ç›¸å…³è¯æ˜ææ–™",
                        å½¢å¼å®¡æŸ¥:
                          "<b>å½¢å¼å®¡æŸ¥</b><br/>ğŸ” ææ–™å®Œæ•´æ€§æ£€æŸ¥<br/>â€¢ æ£€æŸ¥ææ–™å®Œæ•´æ€§<br/>â€¢ éªŒè¯æ ¼å¼è§„èŒƒæ€§<br/>â€¢ ç¡®è®¤ç”³æŠ¥èµ„è´¨",
                        é™æœŸè¡¥æ­£:
                          "<b>é™æœŸè¡¥æ­£</b><br/>âš ï¸ ææ–™è¡¥å……å®Œå–„<br/>â€¢ è¡¥æ­£ææ–™ä¸è¶³<br/>â€¢ æŒ‰è¦æ±‚å®Œå–„æ–‡ä»¶<br/>â€¢ é‡æ–°æäº¤å®¡æŸ¥",
                        ä¸“å®¶è¯„å®¡:
                          "<b>ä¸“å®¶è¯„å®¡</b><br/>ğŸ‘¥ è¡Œä¸šä¸“å®¶è¯„è®®<br/>â€¢ ç»„ç»‡è¡Œä¸šä¸“å®¶è¯„è®®<br/>â€¢ æŠ€æœ¯æ–¹æ¡ˆè®ºè¯<br/>â€¢ å‡ºå…·è¯„å®¡æ„è§",
                        æŠ€æœ¯è¯„å®¡:
                          "<b>æŠ€æœ¯è¯„å®¡</b><br/>ğŸ”¬ æŠ€æœ¯æ·±åº¦è¯„ä¼°<br/>â€¢ æŠ€æœ¯æŒ‡æ ‡éªŒè¯<br/>â€¢ å®‰å…¨æ€§è¯„ä¼°<br/>â€¢ æ ‡å‡†ç¬¦åˆæ€§æ£€æŸ¥",
                        ç»ˆæ­¢æµç¨‹:
                          "<b>ç»ˆæ­¢æµç¨‹</b><br/>ğŸ›‘ å®¡æ‰¹æµç¨‹ç»“æŸ<br/>â€¢ æŠ€æœ¯é£é™©è¿‡é«˜<br/>â€¢ ä¸ç¬¦åˆå›½å®¶æ”¿ç­–<br/>â€¢ å­˜åœ¨å®‰å…¨éšæ‚£",
                        å…¬ç¤ºå¾æ±‚æ„è§:
                          "<b>å…¬ç¤ºå¾æ±‚æ„è§</b><br/>ğŸ“¢ ç¤¾ä¼šå…¬ä¼—ç›‘ç£<br/>â€¢ å…¬å¼€å¾æ±‚æ„è§<br/>â€¢ æ”¶é›†ç¤¾ä¼šåé¦ˆ<br/>â€¢ å¤„ç†æ„è§å»ºè®®",
                        éƒ¨é™…è”å¸­ä¼šè®®:
                          "<b>éƒ¨é™…è”å¸­ä¼šè®®</b><br/>ğŸ›ï¸ è·¨éƒ¨é—¨åè°ƒ<br/>â€¢ ç›¸å…³éƒ¨å§”è”åˆå®¡è®®<br/>â€¢ æ”¿ç­–åè°ƒç»Ÿä¸€<br/>â€¢ å½¢æˆå®¡è®®æ„è§",
                        å›½åŠ¡é™¢å®¡æ‰¹:
                          "<b>å›½åŠ¡é™¢å®¡æ‰¹</b><br/>ğŸ† æœ€é«˜çº§åˆ«å®¡æ‰¹<br/>â€¢ æœ€é«˜çº§åˆ«å®¡æ‰¹<br/>â€¢ æ”¿ç­–åˆè§„æ€§ç¡®è®¤<br/>â€¢ æ­£å¼æ‰¹å‡†æ–‡ä»¶",
                        å‘å¸ƒå®æ–½:
                          "<b>å‘å¸ƒå®æ–½</b><br/>âœ… æ­£å¼ç”Ÿæ•ˆæ‰§è¡Œ<br/>â€¢ æ­£å¼å¯¹å¤–å‘å¸ƒ<br/>â€¢ åˆ¶å®šå®æ–½ç»†åˆ™<br/>â€¢ å¼€å§‹æ‰§è¡Œç›‘ç®¡",
                      };
                      return descriptions[params.name] || params.name;
                    },
                  },
                  edgeSymbol: ["none", "arrow"],
                  edgeSymbolSize: [0, 8],
                  data: [
                    {
                      name: "é¢„ç ”é˜¶æ®µ",
                      x: 10,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "æ­£å¼ç”³æŠ¥",
                      x: 30,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "å½¢å¼å®¡æŸ¥",
                      x: 50,
                      y: 50,
                      symbol: "diamond",
                      itemStyle: {
                        color: "#F59E0B",
                        borderColor: "#D97706",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 45],
                    },
                    {
                      name: "ä¸“å®¶è¯„å®¡",
                      x: 70,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "é™æœŸè¡¥æ­£",
                      x: 50,
                      y: 20,
                      symbol: "rect",
                      itemStyle: {
                        color: "#EF4444",
                        borderColor: "#DC2626",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "æŠ€æœ¯è¯„å®¡",
                      x: 90,
                      y: 50,
                      symbol: "diamond",
                      itemStyle: {
                        color: "#F59E0B",
                        borderColor: "#D97706",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 45],
                    },
                    {
                      name: "å…¬ç¤ºå¾æ±‚æ„è§",
                      x: 110,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [70, 35],
                    },
                    {
                      name: "ç»ˆæ­¢æµç¨‹",
                      x: 90,
                      y: 80,
                      symbol: "rect",
                      itemStyle: {
                        color: "#EF4444",
                        borderColor: "#DC2626",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "éƒ¨é™…è”å¸­ä¼šè®®",
                      x: 130,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#8B5CF6",
                        borderColor: "#6D28D9",
                        borderWidth: 2,
                      },
                      symbolSize: [75, 35],
                    },
                    {
                      name: "å›½åŠ¡é™¢å®¡æ‰¹",
                      x: 150,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#10B981",
                        borderColor: "#059669",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                    {
                      name: "å‘å¸ƒå®æ–½",
                      x: 170,
                      y: 50,
                      symbol: "rect",
                      itemStyle: {
                        color: "#10B981",
                        borderColor: "#059669",
                        borderWidth: 2,
                      },
                      symbolSize: [60, 35],
                    },
                  ],
                  links: [
                    {
                      source: "é¢„ç ”é˜¶æ®µ",
                      target: "æ­£å¼ç”³æŠ¥",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "æ­£å¼ç”³æŠ¥",
                      target: "å½¢å¼å®¡æŸ¥",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "å½¢å¼å®¡æŸ¥",
                      target: "ä¸“å®¶è¯„å®¡",
                      label: {
                        show: true,
                        formatter: "é€šè¿‡",
                        color: "#059669",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "å½¢å¼å®¡æŸ¥",
                      target: "é™æœŸè¡¥æ­£",
                      label: {
                        show: true,
                        formatter: "ä¸é€šè¿‡",
                        color: "#DC2626",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#EF4444", width: 2, type: "dashed" },
                    },
                    {
                      source: "é™æœŸè¡¥æ­£",
                      target: "å½¢å¼å®¡æŸ¥",
                      lineStyle: { color: "#F59E0B", width: 1, curveness: 0.3 },
                    },
                    {
                      source: "ä¸“å®¶è¯„å®¡",
                      target: "æŠ€æœ¯è¯„å®¡",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "æŠ€æœ¯è¯„å®¡",
                      target: "å…¬ç¤ºå¾æ±‚æ„è§",
                      label: {
                        show: true,
                        formatter: "é€šè¿‡",
                        color: "#059669",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "æŠ€æœ¯è¯„å®¡",
                      target: "ç»ˆæ­¢æµç¨‹",
                      label: {
                        show: true,
                        formatter: "ä¸é€šè¿‡",
                        color: "#DC2626",
                        fontSize: 9,
                        fontWeight: "bold",
                      },
                      lineStyle: { color: "#EF4444", width: 2, type: "dashed" },
                    },
                    {
                      source: "å…¬ç¤ºå¾æ±‚æ„è§",
                      target: "éƒ¨é™…è”å¸­ä¼šè®®",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "éƒ¨é™…è”å¸­ä¼šè®®",
                      target: "å›½åŠ¡é™¢å®¡æ‰¹",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                    {
                      source: "å›½åŠ¡é™¢å®¡æ‰¹",
                      target: "å‘å¸ƒå®æ–½",
                      lineStyle: { color: "#10B981", width: 2 },
                    },
                  ],
                  lineStyle: {
                    opacity: 0.8,
                    width: 2,
                    curveness: 0.1,
                    color: "#4B5563",
                  },
                },
              ],
            });

            const wordCloudElement = section.querySelector(
              ".professions-word-cloud"
            );
            if (!wordCloudElement) {
              console.error("Word cloud element not found");
              return;
            }
            const wordCloudChart = echarts.init(wordCloudElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.wordCloudChart = wordCloudChart;
            wordCloudChart.setOption({
              tooltip: {
                ...echartsTooltipOption,
                formatter: (p) => `${p.name}: ${p.value}ä¸ªå²—ä½`,
              },
              series: [
                {
                  type: "wordCloud",
                  shape: "circle",
                  sizeRange: [15, 60],
                  rotationRange: [-30, 30],
                  textStyle: {
                    fontFamily: "sans-serif",
                    color: (params) =>
                      params.data.certified ? "#EF4444" : "#6B7280",
                  },
                  emphasis: {
                    textStyle: { fontWeight: "bold", color: "#fff" },
                  },
                  data: [
                    { name: "æ°‘å®¿ç®¡å®¶", value: 1500, certified: true },
                    { name: "æ— äººæœºé©¾é©¶å‘˜", value: 1200, certified: true },
                    { name: "è€å¹´æ•°å­—æœåŠ¡å¸ˆ", value: 900, certified: true },
                    { name: "AIè®­ç»ƒå¸ˆ", value: 1800, certified: true },
                    { name: "å…ƒå®‡å®™åœºæ™¯ç­–åˆ’å¸ˆ", value: 2500, certified: false },
                    { name: "å® ç‰©æ®¡è‘¬å¸ˆ", value: 800, certified: false },
                    { name: "æ•°æ®æ ‡æ³¨å‘˜", value: 2200, certified: false },
                    { name: "æ¸¸æˆé™ªç»ƒå¸ˆ", value: 1600, certified: false },
                  ],
                },
              ],
            });

            const domainBarElement = section.querySelector(".domain-barchart");
            if (!domainBarElement) {
              console.error("Domain bar chart element not found");
              return;
            }
            const domainBarChart = echarts.init(domainBarElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.domainBarChart = domainBarChart;
            domainBarChart.setOption({
              tooltip: { ...echartsTooltipOption },
              grid: {
                left: "3%",
                right: "4%",
                bottom: "3%",
                containLabel: true,
              },
              xAxis: { type: "value" },
              yAxis: {
                type: "category",
                data: [
                  "ä¿¡æ¯æŠ€æœ¯",
                  "ç”Ÿæ´»æœåŠ¡",
                  "æ–‡åŒ–å¨±ä¹",
                  "åŒ»ç–—å¥åº·",
                  "æ•™è‚²åŸ¹è®­",
                ],
              },
              series: [
                {
                  name: "å²—ä½æ•°é‡",
                  type: "bar",
                  data: [18000, 15000, 12000, 9000, 7500],
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [
                      { offset: 0, color: "#3B82F6" },
                      { offset: 1, color: "#22D3EE" },
                    ]),
                  },
                  label: { show: true, position: "right", color: "#fff" },
                },
              ],
            });
          }, 100);
        }

        function setupSankeyChart(section) {
          setTimeout(() => {
            const sankeyElement = section.querySelector(".sankey-chart");
            if (!sankeyElement) {
              console.error("Sankey chart element not found");
              return;
            }
            const sankeyChart = echarts.init(sankeyElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.sankeyChart = sankeyChart;
            sankeyChart.setOption({
              tooltip: {
                trigger: "item",
                triggerOn: "mousemove",
                ...echartsTooltipOption,
              },
              series: {
                type: "sankey",
                emphasis: { focus: "adjacency" },
                nodeAlign: "left",
                data: [
                  { name: "æŠ€æœ¯çªç ´", itemStyle: { color: "#3B82F6" } },
                  { name: "å¸‚åœºéœ€æ±‚", itemStyle: { color: "#F97316" } },
                  { name: "æ”¿ç­–å¼•å¯¼", itemStyle: { color: "#10B981" } },
                  { name: "AIè®­ç»ƒå¸ˆ" },
                  { name: "æ— äººæœºé©¾é©¶å‘˜" },
                  { name: "æ°‘å®¿ç®¡å®¶" },
                  { name: "è€å¹´æ•°å­—æœåŠ¡å¸ˆ" },
                  { name: "å‰§æœ¬æ€DM" },
                ],
                links: [
                  { source: "æŠ€æœ¯çªç ´", target: "AIè®­ç»ƒå¸ˆ", value: 10 },
                  { source: "æŠ€æœ¯çªç ´", target: "æ— äººæœºé©¾é©¶å‘˜", value: 8 },
                  { source: "å¸‚åœºéœ€æ±‚", target: "æ°‘å®¿ç®¡å®¶", value: 9 },
                  { source: "å¸‚åœºéœ€æ±‚", target: "å‰§æœ¬æ€DM", value: 7 },
                  { source: "æ”¿ç­–å¼•å¯¼", target: "è€å¹´æ•°å­—æœåŠ¡å¸ˆ", value: 6 },
                  { source: "å¸‚åœºéœ€æ±‚", target: "è€å¹´æ•°å­—æœåŠ¡å¸ˆ", value: 4 },
                  { source: "æŠ€æœ¯çªç ´", target: "æ°‘å®¿ç®¡å®¶", value: 2 },
                ],
                lineStyle: { color: "source", curveness: 0.5 },
              },
            });
          }, 200);
        }

        function setupRightsChart(section) {
          setTimeout(() => {
            const rightsElement = section.querySelector(".rights-barchart");
            if (!rightsElement) {
              console.error("Rights chart element not found");
              return;
            }
            const rightsChart = echarts.init(rightsElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.rightsChart = rightsChart;
            rightsChart.setOption({
              tooltip: {
                trigger: "axis",
                axisPointer: { type: "shadow" },
                ...echartsTooltipOption,
              },
              legend: {
                data: ["è®¤è¯èŒä¸š", "æœªè®¤è¯èŒä¸š"],
                textStyle: { color: "#fff" },
              },
              grid: {
                left: "3%",
                right: "4%",
                bottom: "3%",
                containLabel: true,
              },
              xAxis: {
                type: "category",
                data: ["å·¥ä¼¤ä¿é™©è¦†ç›–ç‡", "èŒä¸šåŸ¹è®­è¦†ç›–ç‡", "èŒç§°è¯„å®šè¦†ç›–ç‡"],
              },
              yAxis: { type: "value", axisLabel: { formatter: "{value} %" } },
              series: [
                {
                  name: "è®¤è¯èŒä¸š",
                  type: "bar",
                  itemStyle: { color: "#3B82F6" },
                  data: [85, 78, 65],
                },
                {
                  name: "æœªè®¤è¯èŒä¸š",
                  type: "bar",
                  itemStyle: { color: "#6B7280" },
                  data: [32, 25, 5],
                },
              ],
            });
          }, 400);
        }

        function setupRectificationCharts(section) {
          setTimeout(() => {
            const rectificationElement = section.querySelector(
              ".rectification-word-clouds"
            );
            if (!rectificationElement) {
              console.error("Rectification chart element not found");
              return;
            }
            const rectificationChart = echarts.init(
              rectificationElement,
              "dark"
            );
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.rectificationChart = rectificationChart;
            rectificationChart.setOption({
              grid: [
                { left: "5%", top: "5%", bottom: "5%", width: "40%" },
                { right: "5%", top: "5%", bottom: "5%", width: "40%" },
              ],
              xAxis: [
                { gridIndex: 0, show: false },
                { gridIndex: 1, show: false },
              ],
              yAxis: [
                { gridIndex: 0, show: false },
                { gridIndex: 1, show: false },
              ],
              graphic: [
                {
                  type: "text",
                  left: "25%",
                  top: "10%",
                  style: {
                    text: "2022å¹´ (æ°‘é—´)",
                    fill: "#9CA3AF",
                    font: "bold 16px sans-serif",
                  },
                },
                {
                  type: "text",
                  right: "20%",
                  top: "10%",
                  style: {
                    text: "2024å¹´ (å®˜æ–¹)",
                    fill: "#9CA3AF",
                    font: "bold 16px sans-serif",
                  },
                },
                {
                  type: "text",
                  right: "18%",
                  bottom: "10%",
                  style: {
                    text: "è§„èŒƒåŒ–ç‡æå‡ â†—",
                    fill: "#10B981",
                    font: "bold 18px sans-serif",
                  },
                },
              ],
              series: [
                {
                  type: "wordCloud",
                  xAxisIndex: 0,
                  yAxisIndex: 0,
                  sizeRange: [12, 35],
                  rotationRange: [-45, 45],
                  textStyle: { fontFamily: "KaiTi", color: "#6B7280" },
                  data: [
                    { name: "é“¶å‘ç”Ÿæ´»è§„åˆ’å¸ˆ", value: 10 },
                    { name: "è€å¹´é™ªä¼´å¸ˆ", value: 8 },
                    { name: "è€å¹´æ•°å­—è¾…å¯¼å‘˜", value: 12 },
                    { name: "åŠ©è€å‘˜", value: 6 },
                  ],
                },
                {
                  type: "wordCloud",
                  xAxisIndex: 1,
                  yAxisIndex: 1,
                  sizeRange: [20, 50],
                  rotationRange: [0, 0],
                  textStyle: {
                    fontFamily: "Microsoft YaHei",
                    color: "#EF4444",
                  },
                  data: [{ name: "è€å¹´æ•°å­—æœåŠ¡å¸ˆ", value: 20 }],
                },
              ],
            });
          }, 300);
        }

  function setupRightsChart(section) {
          setTimeout(() => {
            const rightsElement = section.querySelector(".rights-barchart");
            if (!rightsElement) {
              console.error("Rights chart element not found");
              return;
            }
            const rightsChart = echarts.init(rightsElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.rightsChart = rightsChart;
            rightsChart.setOption({
              tooltip: {
                trigger: "axis",
                axisPointer: { type: "shadow" },
                ...echartsTooltipOption,
              },
              legend: {
                data: ["è®¤è¯èŒä¸š", "æœªè®¤è¯èŒä¸š"],
                textStyle: { color: "#fff" },
              },
              grid: {
                left: "3%",
                right: "4%",
                bottom: "3%",
                containLabel: true,
              },
              xAxis: {
                type: "category",
                data: ["å·¥ä¼¤ä¿é™©è¦†ç›–ç‡", "èŒä¸šåŸ¹è®­è¦†ç›–ç‡", "èŒç§°è¯„å®šè¦†ç›–ç‡"],
              },
              yAxis: { type: "value", axisLabel: { formatter: "{value} %" } },
              series: [
                {
                  name: "è®¤è¯èŒä¸š",
                  type: "bar",
                  itemStyle: { color: "#3B82F6" },
                  data: [85, 78, 65],
                },
                {
                  name: "æœªè®¤è¯èŒä¸š",
                  type: "bar",
                  itemStyle: { color: "#6B7280" },
                  data: [32, 25, 5],
                },
              ],
            });
          }, 400);
        }

        // æ–°å¢ï¼šTop10 äº¤äº’å¼æ¡å½¢å›¾ï¼ˆå‚è€ƒ ref/topten.png çš„è§†è§‰æ¨¡æ¿ï¼‰
        function setupTopTenChart(section) {
          setTimeout(() => {
            const topElement = section.querySelector(".topten-chart");
            if (!topElement) {
              console.error("TopTen chart element not found");
              return;
            }

            const topChart = echarts.init(topElement, "dark");
            window.topChart = topChart;

            // ä½¿ç”¨ç”¨æˆ·æä¾›çš„ Top10 å æ¯”æ•°æ®ï¼ˆç™¾åˆ†æ¯”ï¼‰
            const data = [
              { name: 'æŠ¤å·¥', value: 9.9 },
              { name: 'æŠ¤å£«', value: 5.5 },
              { name: 'æŠ¤å£«é•¿', value: 4.4 },
              { name: 'ç¤¾å·¥', value: 2.6 },
              { name: 'å†…ç§‘åŒ»ç”Ÿ', value: 2.4 },
              { name: 'å¨å¸ˆ', value: 1.7 },
              { name: 'ä¿æ´', value: 1.7 },
              { name: 'å…¨ç§‘åŒ»ç”Ÿ', value: 1.4 },
              { name: 'åº·å¤æ²»ç–—å¸ˆ', value: 1.4 },
              { name: 'å¨å·¥/å¸®å¨', value: 1.1 },
            ];

            const option = {
              title: {
                text: 'å…»è€/çœ‹æŠ¤è¡Œä¸šæ‹›è˜èŒä½æ•°å æ¯”TOP10èŒä¸š',
                subtext: 'ç»Ÿè®¡è§„åˆ™ï¼šåŸºäºæ™ºè”æ‹›è˜2025å¹´åœ¨çº¿æ‹›è˜æ•°æ®åº“çš„æ•°æ®ç›‘æµ‹ç»Ÿè®¡åˆ†æ  \n æ•°æ®æ¥æº: æ™ºè”æ‹›è˜(www.zhaopin.com)',
                left: 'center',
                textStyle: { color: '#fff', fontSize: 16 },
                subtextStyle: { color: '#9CA3AF', fontSize: 11 },
              },
              tooltip: {
                ...echartsTooltipOption,
                formatter: function (p) {
                  return `<div style="font-weight:bold">${p.name}</div><div>å æ¯”: ${p.value}%</div>`;
                },
              },
              grid: { left: '6%', right: '6%', top: '14%', bottom: '6%' },
              xAxis: { type: 'value', axisLabel: { color: '#9CA3AF', formatter: '{value} %' }, max: 12 },
              yAxis: {
                type: 'category',
                inverse: true,
                data: data.map(d => d.name),
                axisLabel: { color: '#fff', fontSize: 13 },
                axisLine: { show: false },
                axisTick: { show: false },
              },
              series: [
                {
                  type: 'bar',
                  data: data.map(d => d.value),
                  itemStyle: {
                    color: new echarts.graphic.LinearGradient(0, 0, 1, 0, [
                      { offset: 0, color: '#06b6d4' },
                      { offset: 1, color: '#3b82f6' },
                    ]),
                    borderRadius: 8,
                  },
                  barWidth: 18,
                  label: { show: true, position: 'right', color: '#fff', formatter: '{c}%' },
                },
              ],
            };

            topChart.setOption(option);

            // ç‚¹å‡»ç”±å…¨å±€ addChartClickListeners ç»Ÿä¸€å¤„ç†ï¼ˆä¿æŒä¸å…¶ä»–å›¾è¡¨ä¸€è‡´ï¼‰

            // å­˜å‚¨å›¾è¡¨å®ä¾‹ä»¥ä¾¿ç»Ÿä¸€æ¸…ç†å’Œ resizeï¼ˆä½¿ç”¨å…¨å±€ ResizeObserver / å…¨å±€èŠ‚æµ resizeï¼‰
            topElement._chartInstance = topChart;
          }, 200);
        }

        function setupReconstructionChart(section) {
          setTimeout(() => {
            const pieElement = section.querySelector(".factors-piechart");
            if (!pieElement) {
              console.error("Pie chart element not found");
              return;
            }
            const pieChart = echarts.init(pieElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.pieChart = pieChart;
            const stages = {
              2020: [
                { value: 65, name: "è–ªèµ„å¾…é‡" },
                { value: 25, name: "æƒ…æ„Ÿè®¤åŒ" },
                { value: 10, name: "å·¥ä½œè‡ªç”±" },
              ],
              2025: [
                { value: 40, name: "è–ªèµ„å¾…é‡" },
                { value: 30, name: "æƒ…æ„Ÿè®¤åŒ" },
                { value: 30, name: "å·¥ä½œè‡ªç”±" },
              ],
            };
            pieChart.setOption({
              title: {
                text: "èŒä¸šé€‰æ‹©æ ¸å¿ƒå› ç´ æ¼”å˜",
                left: "center",
                textStyle: { color: "#fff" },
              },
              tooltip: {
                trigger: "item",
                formatter: "{a} <br/>{b}: {c}%",
                ...echartsTooltipOption,
              },
              legend: {
                orient: "vertical",
                left: 10,
                data: ["è–ªèµ„å¾…é‡", "æƒ…æ„Ÿè®¤åŒ", "å·¥ä½œè‡ªç”±"],
                textStyle: { color: "#fff" },
              },
              series: [
                {
                  name: "2025å¹´",
                  type: "pie",
                  radius: ["40%", "70%"],
                  avoidLabelOverlap: false,
                  label: { show: false, position: "center" },
                  emphasis: {
                    label: { show: true, fontSize: 20, fontWeight: "bold" },
                  },
                  labelLine: { show: false },
                  data: stages["2025"],
                },
              ],
            });
            pieElement.addEventListener("click", () => {
              const currentYear = pieChart
                .getOption()
                .series[0].name.includes("2025")
                ? "2020"
                : "2025";
              pieChart.setOption({
                series: [
                  { name: `${currentYear}å¹´`, data: stages[currentYear] },
                ],
              });
            });
          }, 500);
        }

        function setupConclusionChart(section) {
          setTimeout(() => {
            const mapElement = section.querySelector(".future-map");
            if (!mapElement) {
              console.error("Map chart element not found");
              return;
            }
            const mapChart = echarts.init(mapElement, "dark");
            // å­˜å‚¨ä¸ºå…¨å±€å˜é‡ä»¥ä¾›æ¨¡æ€æ¡†ä½¿ç”¨
            window.mapChart = mapChart;
            const professions = [
              { name: "AIè®­ç»ƒå¸ˆ", value: 1, category: 0 },
              { name: "æ— äººæœºé©¾é©¶å‘˜", value: 1, category: 0 },
              { name: "å…ƒå®‡å®™ç­–åˆ’å¸ˆ", value: 1, category: 1 },
              { name: "æ¸¸æˆé™ªç»ƒå¸ˆ", value: 1, category: 1 },
              { name: "æ±‰æœé€ å‹å¸ˆ", value: 1, category: 1 },
              { name: "æ•´ç†æ”¶çº³å¸ˆ", value: 1, category: 1 },
            ];
            mapChart.setOption({
              title: {
                text: "ä¸­å›½æ–°èŒä¸šå›¾è°±",
                left: "center",
                textStyle: { color: "#fff" },
              },
              tooltip: {},
              legend: [
                {
                  data: ["å·²è®¤è¯", "æœªè®¤è¯"],
                  top: "bottom",
                  textStyle: { color: "#fff" },
                },
              ],
              animationDurationUpdate: 1500,
              animationEasingUpdate: "quinticInOut",
              series: [
                {
                  type: "graph",
                  layout: "force",
                  force: { repulsion: 80 },
                  data: professions,
                  categories: [
                    { name: "å·²è®¤è¯", itemStyle: { color: "#EF4444" } },
                    { name: "æœªè®¤è¯", itemStyle: { color: "#6B7280" } },
                  ],
                  roam: true,
                  label: { show: true, formatter: "{b}" },
                  lineStyle: { color: "source", curveness: 0.3 },
                },
              ],
            });
          }, 600);
        }

        // --- å¯åŠ¨é¡µé¢ ---
        initPage();

        // ä¼˜åŒ–çª—å£å°ºå¯¸å˜åŒ–æ—¶çš„å“åº”å¼å¤„ç†
        const resizeObserver = new ResizeObserver(
          throttle(() => {
            // æ”¶é›†æ‰€æœ‰å·²åˆå§‹åŒ–çš„å›¾è¡¨å®ä¾‹å¹¶é‡æ–°æ¸²æŸ“
            const charts = document.querySelectorAll("[_echarts_instance_]");
            charts.forEach((element) => {
              const chart = echarts.getInstanceByDom(element);
              if (chart && !chart.isDisposed()) {
                chart.resize();
              }
            });
          }, 300)
        );

        // å…¨å±€ window resize å¤‡ä»½å¤„ç†ï¼ˆæœ‰äº›å¸ƒå±€ä»å°åˆ°å¤§å¯èƒ½ä¸è§¦å‘ ResizeObserverï¼‰
        const globalResizeHandler = throttle(() => {
          const containers = document.querySelectorAll('.chart-container');
          containers.forEach((c) => {
            try {
              const chart = echarts.getInstanceByDom(c);
              if (chart && !chart.isDisposed()) chart.resize();
            } catch (e) {
              // ignore
            }
          });
        }, 250);

        window.addEventListener('resize', globalResizeHandler);

        // ç›‘å¬æ‰€æœ‰å›¾è¡¨å®¹å™¨çš„å°ºå¯¸å˜åŒ–
        document.addEventListener("DOMContentLoaded", () => {
          const chartContainers = document.querySelectorAll(".chart-container");
          chartContainers.forEach((container) => {
            resizeObserver.observe(container);
          });
        });

        // é¡µé¢å¸è½½æ—¶æ¸…ç†èµ„æº
        window.addEventListener("beforeunload", () => {
          // æ¸…ç†æ‰€æœ‰å›¾è¡¨å®ä¾‹
          const charts = document.querySelectorAll("[_echarts_instance_]");
          charts.forEach((element) => {
            const chart = echarts.getInstanceByDom(element);
            if (chart && !chart.isDisposed()) {
              chart.dispose();
            }

            // æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
            if (element._resizeHandler) {
              window.removeEventListener("resize", element._resizeHandler);
            }
          });

          // æ¸…ç† ResizeObserver
          resizeObserver.disconnect();
          // æ¸…ç†å…¨å±€ resize ç›‘å¬
          window.removeEventListener('resize', globalResizeHandler);
        });
      });

      // æ»šåŠ¨åˆ°é¡¶éƒ¨åŠŸèƒ½
      function scrollToTop() {
        window.scrollTo({
          top: 0,
          behavior: "smooth",
        });
      }

      // å¯¼èˆªé«˜äº®å’Œè¿›åº¦æŒ‡ç¤ºå™¨åŠŸèƒ½
      function updateNavigation() {
        const sections = [
          "header",
          "status-intro",
          "status",
          "drivers",
          "rectification",
          "predicament",
          "reconstruction",
          "conclusion",
        ];
        const navLinks = document.querySelectorAll(".nav-section");
        const progressBar = document.getElementById("navProgress");

        let currentSection = "header";
        let maxScroll = 0;

        // æ‰¾åˆ°å½“å‰å¯è§çš„section
        sections.forEach((sectionId, index) => {
          const element = document.getElementById(sectionId);
          if (element) {
            const rect = element.getBoundingClientRect();
            const elementTop = rect.top;
            const elementHeight = rect.height;

            // å¦‚æœsectionçš„é¡¶éƒ¨åœ¨è§†å£ä¸ŠåŠéƒ¨åˆ†ï¼Œæˆ–è€…æ˜¯æœ€åä¸€ä¸ªå¯è§çš„section
            if (elementTop <= window.innerHeight * 0.3) {
              currentSection = sectionId;
              maxScroll = Math.max(maxScroll, index);
            }
          }
        });

        // æ›´æ–°å¯¼èˆªé“¾æ¥é«˜äº®
        navLinks.forEach((link) => {
          const section = link.getAttribute("data-section");
          if (section === currentSection) {
            link.classList.add("nav-active");
          } else {
            link.classList.remove("nav-active");
          }
        });

        // æ›´æ–°è¿›åº¦æ¡
        if (progressBar) {
          const progress = Math.min(
            100,
            (maxScroll / (sections.length - 1)) * 100
          );
          progressBar.style.height = `${progress}%`;
        }
      }

      // ç›‘å¬æ»šåŠ¨äº‹ä»¶
      let scrollTimeout;
      window.addEventListener("scroll", () => {
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(updateNavigation, 100);
      });

      // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–å¯¼èˆª
      document.addEventListener("DOMContentLoaded", () => {
        updateNavigation();
      });

      // ä¼˜åŒ–çš„å›¾ç‰‡æ”¾å¤§åŠŸèƒ½
      function openImageModal(img) {
        console.log("openImageModal called with:", img);
        const modal = document.getElementById("imageModal");
        const modalImg = document.getElementById("modalImage");

        console.log("modal:", modal, "modalImg:", modalImg);

        if (modal && modalImg) {
          modalImg.src = img.src;
          modalImg.alt = img.alt;
          modal.classList.add("show");

          // æ£€æŸ¥ç±»æ˜¯å¦æ·»åŠ æˆåŠŸ
          console.log("Classes after adding show:", modal.className);
          console.log(
            "Computed style display:",
            window.getComputedStyle(modal).display
          );

          // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
          document.body.style.overflow = "hidden";

          // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
          document.addEventListener("keydown", handleKeyPress);

          console.log("Modal should be visible now");
        } else {
          console.error("Modal elements not found");
        }
      }

      function closeImageModal() {
        const modal = document.getElementById("imageModal");
        modal.classList.remove("show");

        // æ¢å¤èƒŒæ™¯æ»šåŠ¨
        document.body.style.overflow = "auto";

        // ç§»é™¤é”®ç›˜äº‹ä»¶ç›‘å¬
        document.removeEventListener("keydown", handleKeyPress);
      }

      // å›¾è¡¨æ”¾å¤§åŠŸèƒ½
      let currentModalChart = null;
      let originalChartData = null;

      function openChartModal(chartInstance, chartElement) {
        const modal = document.getElementById("chartModal");
        const modalChartDiv = document.getElementById("modalChart");

        // ä¿å­˜åŸå§‹å›¾è¡¨é…ç½®
        originalChartData = chartInstance.getOption();

        // æ˜¾ç¤ºæ¨¡æ€æ¡†
        modal.classList.add("show");
        document.body.style.overflow = "hidden";

        // åˆ›å»ºæ–°çš„å›¾è¡¨å®ä¾‹
        setTimeout(() => {
          if (currentModalChart) {
            currentModalChart.dispose();
          }

          currentModalChart = echarts.init(modalChartDiv, "dark");

          // å…‹éš†å¹¶ä¼˜åŒ–é…ç½®ç”¨äºæ”¾å¤§æ˜¾ç¤º
          const modalOption = JSON.parse(JSON.stringify(originalChartData));

          // é’ˆå¯¹ä¸åŒå›¾è¡¨ç±»å‹è¿›è¡Œä¼˜åŒ–
          if (modalOption.title && modalOption.title[0]) {
            modalOption.title[0].textStyle = {
              ...modalOption.title[0].textStyle,
              fontSize: 24,
            };
          }

          // ä¼˜åŒ–æ–‡å­—å¤§å°
          if (modalOption.xAxis) {
            if (Array.isArray(modalOption.xAxis)) {
              modalOption.xAxis.forEach((axis) => {
                if (axis.axisLabel) axis.axisLabel.fontSize = 14;
              });
            } else {
              if (modalOption.xAxis.axisLabel)
                modalOption.xAxis.axisLabel.fontSize = 14;
            }
          }

          if (modalOption.yAxis) {
            if (Array.isArray(modalOption.yAxis)) {
              modalOption.yAxis.forEach((axis) => {
                if (axis.axisLabel) axis.axisLabel.fontSize = 14;
              });
            } else {
              if (modalOption.yAxis.axisLabel)
                modalOption.yAxis.axisLabel.fontSize = 14;
            }
          }

          // ä¼˜åŒ–å›¾ä¾‹
          if (modalOption.legend) {
            modalOption.legend.textStyle = {
              ...modalOption.legend.textStyle,
              fontSize: 14,
            };
          }

          // è®¾ç½®é…ç½®å¹¶æ¸²æŸ“
          currentModalChart.setOption(modalOption);

          // ç›‘å¬çª—å£å¤§å°å˜åŒ–
          const resizeObserver = new ResizeObserver(() => {
            if (currentModalChart) {
              currentModalChart.resize();
            }
          });
          resizeObserver.observe(modalChartDiv);

          // ä¿å­˜observerä»¥ä¾¿æ¸…ç†
          currentModalChart._resizeObserver = resizeObserver;
        }, 100);

        // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
        document.addEventListener("keydown", handleChartKeyPress);
      }

      function closeChartModal() {
        const modal = document.getElementById("chartModal");
        modal.classList.remove("show");
        document.body.style.overflow = "auto";

        // æ¸…ç†å›¾è¡¨å®ä¾‹å’Œobserver
        if (currentModalChart) {
          if (currentModalChart._resizeObserver) {
            currentModalChart._resizeObserver.disconnect();
          }
          currentModalChart.dispose();
          currentModalChart = null;
        }

        originalChartData = null;

        // ç§»é™¤é”®ç›˜äº‹ä»¶ç›‘å¬
        document.removeEventListener("keydown", handleChartKeyPress);
      }

      // å›¾è¡¨é”®ç›˜äº‹ä»¶å¤„ç†
      function handleChartKeyPress(event) {
        if (event.key === "Escape") {
          closeChartModal();
        }
      }

      // ä¸ºå›¾è¡¨å®¹å™¨æ·»åŠ ç‚¹å‡»äº‹ä»¶ç›‘å¬å™¨
      function addChartClickListeners() {
        // ç­‰å¾…æ‰€æœ‰å›¾è¡¨åˆå§‹åŒ–å®Œæˆåæ·»åŠ ç›‘å¬å™¨
        setTimeout(() => {
          const chartContainers = [
            { selector: "#header-chart", chart: "headerChart" },
            { selector: ".lifecycle-chart", chart: "lifecycleChart" },
            { selector: ".professions-word-cloud", chart: "wordCloudChart" },
            { selector: ".domain-barchart", chart: "domainBarChart" },
            { selector: ".sankey-chart", chart: "sankeyChart" },
            {
              selector: ".rectification-word-clouds",
              chart: "rectificationChart",
            },
            { selector: ".rights-barchart", chart: "rightsChart" },
            { selector: ".factors-piechart", chart: "pieChart" },
            { selector: ".future-map", chart: "mapChart" },
            // å°† Top10 å›¾åŠ å…¥ç»Ÿä¸€çš„ç‚¹å‡»å¤„ç†æ˜ å°„ï¼Œä½¿å…¶è¡Œä¸ºä¸å…¶ä»–å›¾è¡¨ä¸€è‡´ï¼ˆç‚¹å‡»æ”¾å¤§ï¼‰
            { selector: ".topten-chart", chart: "topChart" },
          ];

          chartContainers.forEach(({ selector, chart }) => {
            const element = document.querySelector(selector);
            if (element && window[chart]) {
              element.addEventListener("click", (e) => {
                e.stopPropagation();
                openChartModal(window[chart], element);
              });
            }
          });

        }, 3000); 
      }

      // é”®ç›˜äº‹ä»¶å¤„ç†
      function handleKeyPress(event) {
        if (event.key === "Escape") {
          closeImageModal();
        }
      }

      // ä¼˜åŒ–æ¨¡æ€æ¡†ç‚¹å‡»äº‹ä»¶ï¼Œåªåœ¨ç‚¹å‡»èƒŒæ™¯æ—¶å…³é—­
      document.addEventListener("DOMContentLoaded", function () {
        const modal = document.getElementById("imageModal");
        const modalImg = document.getElementById("modalImage");

        if (modal && modalImg) {
          modal.addEventListener("click", function (event) {
            // åªæœ‰ç‚¹å‡»èƒŒæ™¯ï¼ˆéå›¾ç‰‡ï¼‰æ—¶æ‰å…³é—­æ¨¡æ€æ¡†
            if (event.target === modal) {
              closeImageModal();
            }
          });

          // é˜»æ­¢ç‚¹å‡»å›¾ç‰‡æ—¶çš„äº‹ä»¶å†’æ³¡
          modalImg.addEventListener("click", function (event) {
            event.stopPropagation();
          });
        }

        // æ·»åŠ å›¾è¡¨ç‚¹å‡»ç›‘å¬å™¨
        addChartClickListeners();
      });
    </script>
  </body>
</html>
